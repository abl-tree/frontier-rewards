(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{141:function(e,t,a){},158:function(e,t,a){},184:function(e,t,a){},291:function(e,t,a){},292:function(e,t,a){},293:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(24),s=a.n(r),i=(a(158),a(26)),l=a(4),o=a.n(l),d=a(2),j=a(10),u=a(11),b=a(15),h=a(302),O=a(144),p=a(310),m=a(312),x=a(143),f=a.n(x),g=a(9),v=a.n(g),y={url:{API_URL:"https://fr-api.thedreamteamdigitalmarketing.com/v1",API_URL_USERS:"https://fr-api.thedreamteamdigitalmarketing.com",BASE_URL:"https://fr-api.thedreamteamdigitalmarketing.com",BROADCAST_URL:"localhost",BROADCAST_KEY:"FRPUSHERKEY",TIMEZONE:"Asia/Manila"}},N=a(0),_=function(e){Object(b.c)((function(e){return e.Auth}));var t=Object(n.useState)(0),a=Object(u.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(0),l=Object(u.a)(i,2),x=l[0],g=l[1],_=Object(n.useState)(0),k=Object(u.a)(_,2),w=k[0],E=k[1],C=Object(n.useState)(0),S=Object(u.a)(C,2),T=S[0],A=S[1],I=Object(n.useState)({options:{title:{text:"Transactions"},noData:{text:"No data"},labels:["Cancelled","Pending","Confirmed","Completed"],colors:["#d8334a","#ffd11f","#f9a72b","#ffeea3"]},series:[]}),M=Object(u.a)(I,2),R=M[0],P=M[1];c.a.useEffect((function(){D(),L(),U(),B(),G()}),[]);var D=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/summary/transactions");case 2:a=e.sent,(0!=(n=a.data.data).cancelled||0!=n.pending||0!=n.confirmed||n.completed)&&P((function(e){return Object(d.a)(Object(d.a)({},e),{},{series:[n.cancelled,n.pending,n.confirmed,n.completed]})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/summary/active_campaigns");case 2:a=e.sent,n=a.data.data,s(n.total);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/summary/active_actions");case 2:a=e.sent,n=a.data.data,g(n.total);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/summary/total_customers");case 2:a=e.sent,n=a.data.data,E(n.total);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/summary/total_packages");case 2:a=e.sent,n=a.data.data,A(n.total);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(h.a,{className:"dashboard-page",children:[Object(N.jsx)(O.a,{md:12,className:"mb-3",children:Object(N.jsxs)(p.a,{indicators:!1,children:[Object(N.jsx)(p.a.Item,{children:Object(N.jsx)("img",{className:"d-block w-100",src:y.url.BASE_URL+"/images/slider-1.png",alt:"First slide"})}),Object(N.jsx)(p.a.Item,{children:Object(N.jsx)("img",{className:"d-block w-100",src:y.url.BASE_URL+"/images/slider-2.png",alt:"Second slide"})})]})}),Object(N.jsxs)(O.a,{className:"d-flex mt-n5",children:[Object(N.jsx)(O.a,{md:6,className:"mb-3",children:Object(N.jsx)(m.a,{children:Object(N.jsx)(m.a.Body,{children:Object(N.jsx)(m.a.Text,{children:Object(N.jsx)(f.a,{options:R.options,series:R.series,type:"pie"})})})})}),Object(N.jsx)(O.a,{md:6,className:"mb-3",children:Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:6,className:"mb-3",children:Object(N.jsx)(m.a,{children:Object(N.jsx)(m.a.Body,{children:Object(N.jsxs)(m.a.Text,{children:[Object(N.jsx)("h6",{children:"Active Campaigns"}),Object(N.jsx)("h3",{children:r})]})})})}),Object(N.jsx)(O.a,{md:6,className:"mb-3",children:Object(N.jsx)(m.a,{children:Object(N.jsx)(m.a.Body,{children:Object(N.jsxs)(m.a.Text,{children:[Object(N.jsx)("h6",{children:"Active Actions"}),Object(N.jsx)("h3",{children:x})]})})})}),Object(N.jsx)(O.a,{md:6,className:"mb-3",children:Object(N.jsx)(m.a,{children:Object(N.jsx)(m.a.Body,{children:Object(N.jsxs)(m.a.Text,{children:[Object(N.jsx)("h6",{children:"Users"}),Object(N.jsx)("h3",{children:w})]})})})}),Object(N.jsx)(O.a,{md:6,className:"mb-3",children:Object(N.jsx)(m.a,{children:Object(N.jsx)(m.a.Body,{children:Object(N.jsxs)(m.a.Text,{children:[Object(N.jsx)("h6",{children:"Packages"}),Object(N.jsx)("h3",{children:T})]})})})})]})})]})]})})},k=a(308),w=a(94),E=a(145),C=function(e,t){return function(){var a=Object(j.a)(o.a.mark((function a(n){var c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"LOGIN_REQUEST"}),a.next=4,v.a.post("/login",t);case 4:c=a.sent,n({type:"LOGIN_SUCCESS",payload:c.data.data}),e.history.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:"LOGIN_FAIL",payload:a.t0.response.data.data});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},S="/users",T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){var e=Object(j.a)(o.a.mark((function e(n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:"USER_REQUEST"}),e.next=4,v.a.get(t,{params:a});case 4:c=e.sent,n({type:"USER_FETCH",payload:c.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n({type:"USER_FAIL",payload:e.t0.response.data.data});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},A=(a(184),a.p+"static/media/logo.60af3259.png"),I=function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.Auth})),c=Object(n.useState)(""),r=Object(u.a)(c,2),s=r[0],i=r[1],l=Object(n.useState)(""),d=Object(u.a)(l,2),h=d[0],O=d[1],p=Object(n.useState)(!1),m=Object(u.a)(p,2),x=m[0],f=m[1],g=function(){var a=Object(j.a)(o.a.mark((function a(n){var c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),n.stopPropagation(),c=n.currentTarget,f(!0),!1!==c.checkValidity()){a.next=6;break}return a.abrupt("return");case 6:t(C(e,{email:s,password:h}));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(N.jsx)("div",{className:"login-container text-center",children:Object(N.jsxs)(k.a,{className:"form-signin",noValidate:!0,validated:x,onSubmit:g,children:[Object(N.jsx)(w.a,{className:"mb-4",src:A,height:"180"}),Object(N.jsxs)("div",{className:"form-fields",children:[Object(N.jsx)(k.a.Control,{type:"email",placeholder:"EMAIL",onChange:function(e){return i(e.target.value)},isInvalid:a.errorMsg,required:!0}),Object(N.jsx)(k.a.Control,{type:"password",placeholder:"PASSWORD",onChange:function(e){return O(e.target.value)},isInvalid:a.errorMsg,required:!0}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:a.errorMsg&&Object(N.jsx)("div",{children:a.errorMsg})}),Object(N.jsx)(E.a,{variant:"dark",type:"submit",children:"LOG IN"})]})]})})},M=a(5),R=a.n(M),P=(a(146),a(23)),D=a(20),L=a(18),U=a(314),B=a(303),G=a(307),F=a(304),z=a(34),H=a(14),Y=a(21),q=a.n(Y),Q=function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.User})),r=Object(n.useState)(!1),s=Object(u.a)(r,2),i=s[0],l=s[1],p=Object(n.useState)({}),m=Object(u.a)(p,2),x=m[0],f=m[1],g=Object(n.useState)({}),_=Object(u.a)(g,2),w=_[0],C=_[1],S=Object(n.useState)(!1),A=Object(u.a)(S,2),I=A[0],M=A[1],Y=(v.a.create({baseURL:"https://stage.apigw.cdkapps.eu",headers:{"Access-Control-Allow-Origin":"http://localhost:3000"}}),[{key:"user_type_id",title:"Type",type:"select",placeholder:"Enter action type",options:[{label:"Customer",key:"3"},{label:"Admin",key:"2"}],default:2,control_id:"formActionType",errorMsg:"Please select type.",required:!0},{key:"firstname",title:"First name",type:"text",placeholder:"Enter first name",control_id:"formFirstName",errorMsg:"Please provide first name.",required:!0},{key:"middlename",title:"Middle name",type:"text",placeholder:"Enter middle name",control_id:"formMiddleName"},{key:"lastname",title:"Last name",type:"text",placeholder:"Enter last name",control_id:"formLastName",errorMsg:"Please provide last name.",required:!0},{key:"email",title:"Email",type:"email",placeholder:"Enter email",control_id:"formEmail",errorMsg:"Please provide email address.",required:!0},{key:"phone_number",title:"Phone number",type:"text",placeholder:"Enter phone number",control_id:"formPhone",errorMsg:"Please provide phone number.",required:!0}]),Q=[{key:"user_type_id",title:"Type",type:"select",placeholder:"Enter action type",options:[{label:"Customer",key:"3"},{label:"Admin",key:"2"}],default:2,control_id:"formActionType",errorMsg:"Please select type.",required:!0},{key:"customer_id",title:"Customer ID",type:"text",placeholder:"Enter customer ID",control_id:"formCustomerId",errorMsg:"Please provide customer ID.",required:!0},{key:"firstname",title:"First name",type:"text",placeholder:"Enter first name",control_id:"formFirstName",errorMsg:"Please provide first name.",required:!0},{key:"middlename",title:"Middle name",type:"text",placeholder:"Enter middle name",control_id:"formMiddleName"},{key:"lastname",title:"Last name",type:"text",placeholder:"Enter last name",control_id:"formLastName",errorMsg:"Please provide last name.",required:!0},{key:"email",title:"Email",type:"email",placeholder:"Enter email",control_id:"formEmail",errorMsg:"Please provide email address.",required:!0},{key:"phone_number",title:"Phone number",type:"text",placeholder:"Enter phone number",control_id:"formPhone",errorMsg:"Please provide phone number.",required:!0},{key:"points",title:"Points",type:"number",placeholder:"Enter points",control_id:"formPoints",required:!1},{key:"package_id",title:"Search name",type:"asyncselect",placeholder:"Enter name",control_id:"formName",errorMsg:"Please add package.",required:!0}],V=function(){return M(!1)},K=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/users",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(T(e,a,n))},W=function(e){var t=q.a.tz.guess(!0);return(e=q.a.tz(e,y.url.TIMEZONE)).tz(t)},J=function(e){e.customer_id=e.info?e.info.customer_id:"",e.package_id=e.info?{value:e.info.package.id,label:e.info.package.name}:"",f(e),M(!0)},Z=function(e){t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"USER_REQUEST"}),e.next=4,v.a.delete("/users/"+t);case 4:n=e.sent,a({type:"USER_DELETE",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a({type:"USER_FAIL",payload:e.t0.response.data.data});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}(0,e))},X=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n,c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/packages?search="+t);case 2:for(a=e.sent,n=a.data.data,c=[],r=0;r<n.data.length;r++)s=n.data[r],c=[].concat(Object(D.a)(c),[{value:s.id,label:s.name}]);return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){return new Promise((function(t){setTimeout((function(){t(X(e))}),1e3)}))},ee=function(e,t){var a=w;a=Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e,t)),C(a),K("/users",a)};return c.a.useEffect((function(){K()}),[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:12,children:Object(N.jsx)(E.a,{variant:"primary",onClick:function(){f({user_type_id:3}),M(!0)},children:"Add User"})}),Object(N.jsx)(G.a,{show:I,onHide:V,children:Object(N.jsxs)(k.a,{noValidate:!0,validated:i,onSubmit:function(e){e.preventDefault(),e.stopPropagation();var a=e.currentTarget;l(!0),!1!==a.checkValidity()&&(x.id?t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"USER_REQUEST"}),e.next=4,v.a.put("/users/"+t.id,t);case 4:return n=e.sent,a({type:"USER_UPDATE",payload:n.data.data}),e.abrupt("return",Promise.resolve());case 9:return e.prev=9,e.t0=e.catch(0),a({type:"USER_FAIL",payload:e.t0.response.data.data}),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}(0,x)).then((function(){M(!1),H.b.success("User updated successfully",{position:H.b.POSITION.BOTTOM_RIGHT})})).catch((function(e){H.b.error(e.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT})})):t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"USER_REQUEST"}),e.next=3,v.a.post("/register",t).then((function(e){return a({type:"USER_ADD",payload:e.data.data}),Promise.resolve()})).catch((function(e){return e.response&&a({type:"USER_FAIL",payload:e.response.data}),Promise.reject(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(0,x)).then((function(){M(!1),H.b.success("User added successfully",{position:H.b.POSITION.BOTTOM_RIGHT})})).catch((function(e){H.b.error(e.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT})})))},children:[Object(N.jsx)(G.a.Header,{closeButton:!0,children:Object(N.jsx)(G.a.Title,{children:R.a.isUndefined(x.id)?"Add User":"Edit User"})}),Object(N.jsx)(G.a.Body,{children:function(){var e=Y;return 3==x.user_type_id&&(e=Q),e.map((function(e,t){return"text"===e.type||"email"===e.type||"number"===e.type?Object(N.jsxs)(k.a.Group,{as:h.a,controlId:e.control_id,children:[Object(N.jsx)(k.a.Label,{column:!0,sm:3,children:e.title}),Object(N.jsxs)(O.a,{sm:9,children:[Object(N.jsx)(k.a.Control,{required:e.required,type:e.type,placeholder:e.placeholder,value:R.a.isUndefined(x[e.key])?"":x[e.key],defaultValue:x[e.key],onChange:function(t){return f((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t.target.value))}))}}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:e.errorMsg})]})]},t):"select"===e.type?Object(N.jsxs)(k.a.Group,{hidden:e.hidden,as:h.a,controlId:e.control_id,children:[Object(N.jsx)(k.a.Label,{column:!0,sm:3,children:e.title}),Object(N.jsxs)(O.a,{sm:9,children:[Object(N.jsx)(k.a.Control,{size:"sm",required:e.required,as:e.type,placeholder:e.placeholder,value:R.a.isUndefined(x[e.key])?"":x[e.key],onChange:function(t){return f((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t.target.value))}))},children:e.options.map((function(e,t){return Object(N.jsx)("option",{value:e.key,children:e.label},t)}))}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:e.errorMsg})]})]},t):"asyncselect"===e.type&&"package_id"==e.key?Object(N.jsx)(z.a,{defaultOptions:!0,defaultValue:R.a.isUndefined(x[e.key])?"":x[e.key],loadOptions:$,onChange:function(t){return f((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t))}))}}):void 0}))}()}),Object(N.jsxs)(G.a.Footer,{children:[Object(N.jsx)(E.a,{variant:"secondary",onClick:V,children:"Close"}),Object(N.jsx)(E.a,{variant:"primary",type:"submit",children:"Save Changes"})]})]})})]}),Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{md:12,children:[Object(N.jsx)(k.a.Group,{controlId:"exampleForm.SelectCustom",children:Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Type"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsxs)(k.a.Control,{as:"select",size:"sm",custom:!0,defaultValue:R.a.isEmpty(w)||R.a.isEmpty(w.type)?"all":w.type,onChange:function(e){return function(e){var t=w;t=Object(d.a)(Object(d.a)({},t),{},{type:e}),C(t),K("/users",t)}(e.target.value)},children:[Object(N.jsx)("option",{value:"all",children:"All"}),Object(N.jsx)("option",{value:"3",children:"Customers"}),Object(N.jsx)("option",{value:"2",children:"Admins"}),Object(N.jsx)("option",{value:"1",children:"Super Admins"})]})})]})}),Object(N.jsx)(k.a.Group,{children:Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Customer ID"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(k.a.Control,{size:"sm",type:"text",placeholder:"e.g ABC123",onChange:function(e){return ee("customer_id",e.target.value)}})})]})}),Object(N.jsx)(k.a.Group,{children:Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Name"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(k.a.Control,{size:"sm",type:"text",placeholder:"e.g John Doe",onChange:function(e){return ee("search",e.target.value)}})})]})}),Object(N.jsx)(k.a.Group,{children:Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Email"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(k.a.Control,{size:"sm",type:"text",placeholder:"e.g example@example.com",onChange:function(e){return ee("email",e.target.value)}})})]})})]})}),Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{md:12,children:[Object(N.jsxs)(F.a,{responsive:!0,hover:!0,size:"sm",children:[Object(N.jsx)("thead",{className:"table-dark",children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"ID"}),Object(N.jsx)("th",{children:"Name"}),Object(N.jsx)("th",{children:"Type"}),Object(N.jsx)("th",{children:"Email"}),Object(N.jsx)("th",{children:"Phone"}),Object(N.jsx)("th",{children:"Package"}),Object(N.jsx)("th",{children:"Created"}),Object(N.jsx)("th",{children:"Updated"}),Object(N.jsx)("th",{children:"Actions"})]})}),Object(N.jsx)("tbody",{children:R.a.isEmpty(a.data.data)?a.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"9",className:"text-center",children:"Loading..."})}):""!==a.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"9",className:"text-center",children:a.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"9",className:"text-center",children:"No data available"})}):a.data.data.map((function(e,t){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:Object(N.jsx)(L.b,{to:"user/"+e.id,children:e.info?e.info.customer_id:"-"})}),Object(N.jsx)("td",{children:Object(N.jsx)(L.b,{to:"user/"+e.id,children:e.name})}),Object(N.jsx)("td",{children:e.type_name}),Object(N.jsx)("td",{children:e.email}),Object(N.jsx)("td",{children:e.phone_number}),Object(N.jsx)("td",{children:e.info&&e.info.package?e.info.package.name:"None"}),Object(N.jsx)("td",{children:W(e.created_at).format("YYYY-MM-DD hh:mm:ss A")}),Object(N.jsx)("td",{children:W(e.updated_at).format("YYYY-MM-DD hh:mm:ss A")}),Object(N.jsx)("td",{children:Object(N.jsxs)(B.a,{size:"sm",children:[Object(N.jsx)(E.a,{variant:"danger",onClick:function(){Z(e.id)},children:"Delete"}),Object(N.jsx)(E.a,{onClick:function(t){return J(e)},children:"Edit"})]})})]},t)}))})]}),Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:function(){if(!R.a.isEmpty(a.data.links))return a.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return K(e.url)},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}()})]})}),Object(N.jsx)(H.a,{})]})},V=a(309),K=a(313),W=a(305),J=a(64),Z=a.n(J),X=function(e){var t=Object(b.c)((function(e){return e.Auth}));return 1===t.user.type||2===t.user.type?function(e){Object(b.b)();var t=Object(n.useRef)(null),a=e.match.params.user,r=Object(n.useState)({}),s=Object(u.a)(r,2),i=s[0],l=s[1],p=Object(n.useState)({}),x=Object(u.a)(p,2),f=x[0],g=x[1],y=Object(n.useState)({loading:!1,data:[],errorMsg:""}),_=Object(u.a)(y,2),k=_[0],w=_[1];c.a.useEffect((function(){S(),C(),l((function(e){return{type:"earn",user_id:a}}))}),[]);var C=function(){var e=Object(j.a)(o.a.mark((function e(){var t,n,c,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,w((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!0})})),e.next=4,v.a.get(t||"/users/"+a+"/rewards");case 4:n=e.sent,c=n.data.data,w((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!1})})),w((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:c.rewards})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/users/"+a);case 2:n=e.sent,g(n.data.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n,c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/campaigns/"+i.campaign_id+"/actions",{search:t,activity:!0});case 2:for(a=e.sent,n=a.data.data,c=[],r=0;r<n.data.length;r++)s=n.data[r].action,c=[].concat(Object(D.a)(c),[{value:s.id,label:s.name}]);return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n,c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/campaigns/"+i.campaign_id+"/actions/"+i.action_id);case 2:for(a=e.sent,n=a.data.data,c=[],r=0;r<n.data.length;r++)s=n.data[r].reward,c=[].concat(Object(D.a)(c),[{value:s.id,label:s.name}]);return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n,c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/campaigns",{params:{search:t,activity:!0}});case 2:for(a=e.sent,n=a.data.data,c=[],r=0;r<n.data.length;r++)s=n.data[r],c=[].concat(Object(D.a)(c),[{value:s.id,label:s.name}]);return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(o.a.mark((function e(){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("transactions",i);case 3:n=e.sent,c=n.data.data,l((function(e){return{type:"earn",user_id:a}})),g((function(e){return Object(d.a)(Object(d.a)({},e),{},{points:c.balance})})),t.current.select.select.clearValue(),H.b.success("Reward has been added successfully",{position:H.b.POSITION.BOTTOM_RIGHT}),C(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),H.b.error(e.t0.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"6",children:Object(N.jsxs)(m.a,{className:"user-info",children:[Object(N.jsxs)(m.a.Body,{children:[function(){if(!R.a.isEmpty(f.info)&&!R.a.isEmpty(f.info.customer_id))return Object(N.jsxs)(K.a,{children:[Object(N.jsx)(Z.a,{value:f.info.customer_id}),Object(N.jsx)(K.a.Caption,{children:f.info.customer_id})]})}(),Object(N.jsx)(m.a.Title,{children:f.name}),Object(N.jsx)(m.a.Subtitle,{className:"mb-2 text-muted",children:R.a.isEmpty(f.info)||R.a.isEmpty(f.info.address)?"":f.info.address}),Object(N.jsx)(m.a.Text,{children:Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{md:9,className:"user-points-container d-flex pr-0 pl-0 pb-1",children:[Object(N.jsx)(O.a,{md:"5",className:"font-weight-bold m-0",children:"Points"}),Object(N.jsx)(O.a,{md:"7",className:"m-0",children:f.points})]})})})]}),Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Personal Information"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Firstname"}),Object(N.jsx)(O.a,{md:"8",children:f.firstname})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Middlename"}),Object(N.jsx)(O.a,{md:"8",children:f.middlename})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Lastname"}),Object(N.jsx)(O.a,{md:"8",children:f.lastname})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Email"}),Object(N.jsx)(O.a,{md:"8",children:f.email})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Phone"}),Object(N.jsx)(O.a,{md:"8",children:f.phone_number})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Package"}),Object(N.jsx)(O.a,{md:"8",children:R.a.isEmpty(f.info)||R.a.isNull(f.info.package)?"":f.info.package.name})]})]})]}),Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Vehicle Info"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Year"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(f.info)||R.a.isNull(f.info.vehicle_year)?"":f.info.vehicle_year})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Make"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(f.info)||R.a.isNull(f.info.vehicle_make)?"":f.info.vehicle_make})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Model"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(f.info)||R.a.isNull(f.info.vehicle_model)?"":f.info.vehicle_model})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Trim"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(f.info)||R.a.isNull(f.info.vehicle_trim)?"":f.info.vehicle_trim})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Color"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(f.info)||R.a.isNull(f.info.vehicle_color)?"":f.info.vehicle_color})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Vin No."}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(f.info)||R.a.isNull(f.info.vehicle_vin_no)?"":f.info.vehicle_vin_no})]})]})]})]})}),Object(N.jsxs)(O.a,{md:"6",children:[Object(N.jsx)(m.a,{className:"user-info",children:Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Add User Action"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsx)(z.a,{ref:t,defaultOptions:!0,loadOptions:function(e){return new Promise((function(t){setTimeout((function(){t(I(e))}),1e3)}))},onChange:function(e){l(null!=e?function(t){return{type:"earn",user_id:a,campaign_id:e.value,campaign_name:e.label}}:function(e){return{type:"earn",user_id:a}})}}),i.campaign_id?Object(N.jsx)(z.a,{defaultOptions:!0,loadOptions:function(e){return new Promise((function(t){setTimeout((function(){t(T(e))}),1e3)}))},onChange:function(e){return l((function(t){return Object(d.a)(Object(d.a)({},t),{},{action_id:e.value,action_name:e.label})}))}},"campaign-"+i.campaign_id):"",i.action_id?Object(N.jsx)(z.a,{isMulti:!0,defaultOptions:!0,loadOptions:function(e){return new Promise((function(t){setTimeout((function(){t(A(e))}),1e3)}))},onChange:function(e){return l((function(t){return Object(d.a)(Object(d.a)({},t),{},{rewards:e})}))}},"action-"+i.action_id):"",i.campaign_id&&i.action_id&&!R.a.isEmpty(i.rewards)?Object(N.jsx)(E.a,{onClick:M,children:"Submit"}):""]})]})}),Object(N.jsx)(m.a,{className:"user-rewards",children:Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Rewards"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsx)(V.a,{variant:"flush",children:function(){var e=k;return R.a.isEmpty(e.data.data)?e.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):""!==e.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:e.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"No data available"})}):e.data.data.map((function(e,t){return Object(N.jsx)(V.a.Item,{children:e.reward_name},t)}))}()}),Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:function(){if(!R.a.isEmpty(k.data.links))return k.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return C(e.url)},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}()})]})]})})]})]}),Object(N.jsx)(H.a,{})]})}(e):function(e){Object(b.b)();var t=e.match.params.user,a=Object(n.useState)({}),r=Object(u.a)(a,2),s=(r[0],r[1]),i=Object(n.useState)({}),l=Object(u.a)(i,2),p=l[0],x=l[1],f=Object(n.useState)({loading:!1,data:[],errorMsg:""}),g=Object(u.a)(f,2),y=g[0],_=g[1];c.a.useEffect((function(){C(),k(),s((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:"earn"})})),s((function(e){return Object(d.a)(Object(d.a)({},e),{},{user_id:t})}))}),[]);var k=function(){var e=Object(j.a)(o.a.mark((function e(){var a,n,c,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:null,_((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!0})})),e.next=4,v.a.get(a||"/users/"+t+"/rewards");case 4:n=e.sent,c=n.data.data,_((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!1})})),_((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:c.rewards})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n,c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("claim",{reward_id:t,qty:1});case 2:a=e.sent,n=a.data.data,"completed"==(c=n.reward).status&&(r=y.data,s=r.data.filter((function(e){return e.id!==c.id})),r.data=s,_((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:r})})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/users/"+t);case 2:n=e.sent,x(n.data.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"6",children:Object(N.jsxs)(m.a,{children:[Object(N.jsxs)(m.a.Body,{children:[function(){if(!R.a.isEmpty(p.info)&&!R.a.isEmpty(p.info.customer_id))return Object(N.jsxs)(K.a,{children:[Object(N.jsx)(Z.a,{value:p.info.customer_id}),Object(N.jsx)(K.a.Caption,{children:p.info.customer_id})]})}(),Object(N.jsx)(m.a.Title,{children:p.name}),Object(N.jsx)(m.a.Subtitle,{className:"mb-2 text-muted",children:R.a.isEmpty(p.info)||R.a.isEmpty(p.info.address)?"":p.info.address}),Object(N.jsx)(m.a.Text,{children:Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Points"}),Object(N.jsx)(O.a,{md:"9",children:Object(N.jsx)(W.a,{variant:"info",children:p.points})})]})})]}),Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Personal Information"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Firstname"}),Object(N.jsx)(O.a,{md:"8",children:p.firstname})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Middlename"}),Object(N.jsx)(O.a,{md:"8",children:p.middlename})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Lastname"}),Object(N.jsx)(O.a,{md:"8",children:p.lastname})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Email"}),Object(N.jsx)(O.a,{md:"8",children:p.email})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Phone"}),Object(N.jsx)(O.a,{md:"8",children:p.phone_number})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Package"}),Object(N.jsx)(O.a,{md:"8",children:R.a.isEmpty(p.info)||R.a.isNull(p.info.package)?"":p.info.package.name})]})]})]}),Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Vehicle Info"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Year"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(p.info)||R.a.isNull(p.info.vehicle_year)?"":p.info.vehicle_year})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Make"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(p.info)||R.a.isNull(p.info.vehicle_make)?"":p.info.vehicle_make})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Model"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(p.info)||R.a.isNull(p.info.vehicle_model)?"":p.info.vehicle_model})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Trim"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(p.info)||R.a.isNull(p.info.vehicle_trim)?"":p.info.vehicle_trim})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Color"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(p.info)||R.a.isNull(p.info.vehicle_color)?"":p.info.vehicle_color})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Vin No."}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(p.info)||R.a.isNull(p.info.vehicle_vin_no)?"":p.info.vehicle_vin_no})]})]})]})]})}),Object(N.jsx)(O.a,{md:"6",children:Object(N.jsx)(m.a,{children:Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Rewards"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsx)(V.a,{variant:"flush",children:function(){var e=y;return R.a.isEmpty(e.data.data)?e.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):""!==e.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:e.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"No data available"})}):e.data.data.map((function(e,t){return Object(N.jsxs)(V.a.Item,{children:[e.reward_name," ",Object(N.jsx)(E.a,{size:"sm",onClick:function(){return w(e.id)},children:"Claim"})]},t)}))}()}),Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:function(){if(!R.a.isEmpty(y.data.links))return y.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return k(e.url)},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}()})]})]})})})]})})}(e)},$=function(e){var t=Object(b.c)((function(e){return e.Auth}));return 1===t.user.type||2===t.user.type?function(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),r=a[0],s=a[1];c.a.useEffect((function(){i()}),[]);var i=function(){var e=Object(j.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/profile");case 2:a=e.sent,s(a.data.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(h.a,{className:"justify-content-md-center",children:Object(N.jsx)(O.a,{md:"8",children:Object(N.jsxs)(m.a,{className:"user-info",children:[Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:r.name}),Object(N.jsx)(m.a.Subtitle,{className:"mb-2 text-muted",children:r.type_name}),Object(N.jsx)(m.a.Text,{children:Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Points"}),Object(N.jsx)(O.a,{md:"9",children:Object(N.jsx)(W.a,{variant:"info",children:r.points})})]})})]}),Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Personal Information"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Firstname"}),Object(N.jsx)(O.a,{md:"8",children:r.firstname||"-"})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Middlename"}),Object(N.jsx)(O.a,{md:"8",children:r.middlename||"-"})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Lastname"}),Object(N.jsx)(O.a,{md:"8",children:r.lastname||"-"})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Email"}),Object(N.jsx)(O.a,{md:"8",children:r.email})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Phone"}),Object(N.jsx)(O.a,{md:"8",children:r.phone_number||"-"})]})]})]})]})})})})}():function(e){var t=Object(b.c)((function(e){return e.Auth})),a=Object(n.useState)({}),r=Object(u.a)(a,2),s=r[0],i=r[1],l=Object(n.useState)({loading:!1,data:[],errorMsg:""}),p=Object(u.a)(l,2),x=p[0],f=p[1];c.a.useEffect((function(){y(),g()}),[]);var g=function(){var e=Object(j.a)(o.a.mark((function e(){var a,n,c,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:null,f((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!0})})),e.next=4,v.a.get(a||"/users/"+t.user.id+"/rewards");case 4:n=e.sent,c=n.data.data,f((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!1})})),f((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:c.rewards})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/profile");case 2:a=e.sent,i(a.data.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n,c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("claim",{reward_id:t,qty:1});case 2:a=e.sent,n=a.data.data,"completed"==(c=n.reward).status&&(r=x.data,s=r.data.filter((function(e){return e.id!==c.id})),r.data=s,f((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:r})})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"6",children:Object(N.jsxs)(m.a,{className:"user-info",children:[Object(N.jsxs)(m.a.Body,{children:[function(){if(!R.a.isEmpty(s.info)&&!R.a.isEmpty(s.info.customer_id))return Object(N.jsxs)(K.a,{children:[Object(N.jsx)(Z.a,{value:s.info.customer_id}),Object(N.jsx)(K.a.Caption,{children:s.info.customer_id})]})}(),Object(N.jsx)(m.a.Title,{children:s.name}),Object(N.jsx)(m.a.Subtitle,{className:"mb-2 text-muted",children:s.type_name}),Object(N.jsx)(m.a.Text,{children:Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Points"}),Object(N.jsx)(O.a,{md:"9",children:Object(N.jsx)(W.a,{variant:"info",children:s.points})})]})})]}),Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Personal Information"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Firstname"}),Object(N.jsx)(O.a,{md:"8",children:s.firstname||"-"})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Middlename"}),Object(N.jsx)(O.a,{md:"8",children:s.middlename||"-"})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Lastname"}),Object(N.jsx)(O.a,{md:"8",children:s.lastname||"-"})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Email"}),Object(N.jsx)(O.a,{md:"8",children:s.email})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Phone"}),Object(N.jsx)(O.a,{md:"8",children:s.phone_number||"-"})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"4",className:"font-weight-bold",children:"Package"}),Object(N.jsx)(O.a,{md:"8",children:R.a.isEmpty(s.info)||R.a.isNull(s.info.package)?"":s.info.package.name})]})]})]}),Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Vehicle Info"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Year"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(s.info)||R.a.isNull(s.info.vehicle_year)?"":s.info.vehicle_year})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Make"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(s.info)||R.a.isNull(s.info.vehicle_make)?"":s.info.vehicle_make})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Model"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(s.info)||R.a.isNull(s.info.vehicle_model)?"":s.info.vehicle_model})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Trim"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(s.info)||R.a.isNull(s.info.vehicle_trim)?"":s.info.vehicle_trim})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Color"}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(s.info)||R.a.isNull(s.info.vehicle_color)?"":s.info.vehicle_color})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"3",className:"font-weight-bold",children:"Vin No."}),Object(N.jsx)(O.a,{md:"9",children:R.a.isEmpty(s.info)||R.a.isNull(s.info.vehicle_vin_no)?"":s.info.vehicle_vin_no})]})]})]})]})}),Object(N.jsx)(O.a,{md:"6",children:Object(N.jsx)(m.a,{className:"user-rewards",children:Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Rewards"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsx)(V.a,{variant:"flush",children:function(){var e=x;return R.a.isEmpty(e.data.data)?e.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):""!==e.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:e.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"Unable to get data"})}):e.data.data.map((function(e,t){return Object(N.jsxs)(V.a.Item,{children:[e.reward_name,Object(N.jsx)(E.a,{size:"sm",className:"float-right",variant:"dark",onClick:function(){return _(e.id)},children:"Claim"})]},t)}))}()}),Object(N.jsx)(U.a,{className:"float-right",children:function(){if(!R.a.isEmpty(x.data.links))return x.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return g(e.url)},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}()})]})]})})})]})})}()},ee=function(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),l=Object(u.a)(i,2),b=l[0];l[1];c.a.useEffect((function(){p(1)}),[]);var p=function(){var e=Object(j.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/profile");case 2:a=e.sent,s(a.data.data),console.log(a.data.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v.a.post("/settings",r);case 3:e.sent,console.log(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(m.a,{children:Object(N.jsxs)(k.a,{noValidate:!0,validated:b,onSubmit:x,children:[Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Personal Information"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsx)(h.a,{children:Object(N.jsx)(O.a,{children:"Name"})}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{children:Object(N.jsx)(k.a.Control,{placeholder:"First name",value:r.firstname,onChange:function(e){return s((function(t){return Object(d.a)(Object(d.a)({},t),{},{firstname:e.target.value})}))}})}),Object(N.jsx)(O.a,{children:Object(N.jsx)(k.a.Control,{placeholder:"Middle name",value:r.middlename,onChange:function(e){return s((function(t){return Object(d.a)(Object(d.a)({},t),{},{middlename:e.target.value})}))}})}),Object(N.jsx)(O.a,{children:Object(N.jsx)(k.a.Control,{placeholder:"Last name",value:r.lastname,onChange:function(e){return s((function(t){return Object(d.a)(Object(d.a)({},t),{},{lastname:e.target.value})}))}})})]}),Object(N.jsxs)(k.a.Group,{controlId:"formGridAddress1",children:[Object(N.jsx)(k.a.Label,{children:"Phone number"}),Object(N.jsx)(k.a.Control,{placeholder:"1234 Main St",value:r.phone_number,onChange:function(e){return s((function(t){return Object(d.a)(Object(d.a)({},t),{},{phone_number:e.target.value})}))}})]})]})]}),Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:"Security"}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsxs)(k.a.Group,{controlId:"formGridEmail",children:[Object(N.jsx)(k.a.Label,{children:"Email"}),Object(N.jsx)(k.a.Control,{placeholder:"Email",value:r.email,onChange:function(e){return s((function(t){return Object(d.a)(Object(d.a)({},t),{},{email:e.target.value})}))}})]}),Object(N.jsxs)(k.a.Group,{controlId:"formGridPassword",children:[Object(N.jsx)(k.a.Label,{children:"Password"}),Object(N.jsx)(k.a.Control,{placeholder:"Password",type:"password",onChange:function(e){return s((function(t){return Object(d.a)(Object(d.a)({},t),{},{password:e.target.value})}))}})]}),Object(N.jsxs)(k.a.Group,{controlId:"formGridNewPassword",children:[Object(N.jsx)(k.a.Label,{children:"New Password"}),Object(N.jsx)(k.a.Control,{placeholder:"New Password",type:"password",onChange:function(e){return s((function(t){return Object(d.a)(Object(d.a)({},t),{},{new_password:e.target.value})}))}})]}),Object(N.jsxs)(k.a.Group,{controlId:"formGridConfirmPassword",children:[Object(N.jsx)(k.a.Label,{children:"Confirm Password"}),Object(N.jsx)(k.a.Control,{placeholder:"Confirm Password",type:"password",onChange:function(e){return s((function(t){return Object(d.a)(Object(d.a)({},t),{},{new_password_confirmation:e.target.value})}))}})]}),Object(N.jsx)(E.a,{variant:"primary",type:"submit",children:"Update"})]})]})]})})})},te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/packages";return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PACKAGE_REQUEST"}),e.next=4,v.a.get(t);case 4:n=e.sent,a({type:"PACKAGE_SUCCESS",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a({type:"PACKAGE_FAIL",payload:e.t0.response.data.data});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},ae=function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.Package})),r=Object(n.useState)(!1),s=Object(u.a)(r,2),i=s[0],l=s[1],p=Object(n.useState)({}),m=Object(u.a)(p,2),x=m[0],f=m[1],g=Object(n.useState)({}),_=Object(u.a)(g,2),w=(_[0],_[1],e.match.params.product,Object(n.useState)(!1)),C=Object(u.a)(w,2),S=C[0],T=C[1],A=function(){return T(!1)};c.a.useEffect((function(){I()}),[]);var I=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/packages";console.log("production"),t(te(e,a))},M=function(){var e=Object(j.a)(o.a.mark((function e(){var t,a,n,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/rewards");case 2:for(t=e.sent,a=t.data.data,n=[],c=0;c<a.data.length;c++)r=a.data[c],n=[].concat(Object(D.a)(n),[{value:r.id,label:r.name}]);return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PACKAGE_REQUEST"}),e.next=4,v.a.delete("/packages/"+t);case 4:n=e.sent,a({type:"PACKAGE_DELETED",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a({type:"PACKAGE_FAIL",payload:e.t0.response.data.data});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}(0,e))},Y=function(e){var t=q.a.tz.guess(!0);return(e=q.a.tz(e,y.url.TIMEZONE)).tz(t).format("YYYY-MM-DD hh:mm:ss A")};return Object(N.jsxs)(N.Fragment,{children:[void console.log(x),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:12,children:Object(N.jsx)(E.a,{variant:"primary",onClick:function(e){f({}),T(!0)},children:"Add Package"})}),Object(N.jsx)(G.a,{show:S,onHide:A,children:Object(N.jsxs)(k.a,{noValidate:!0,validated:i,onSubmit:function(e){e.preventDefault(),e.stopPropagation();var a=e.currentTarget;l(!0),!1!==a.checkValidity()&&(x.id?t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PACKAGE_REQUEST"}),e.next=4,v.a.put("/packages/"+t.id,t);case 4:return n=e.sent,a({type:"PACKAGE_UPDATED",payload:n.data.data}),e.abrupt("return",Promise.resolve());case 9:return e.prev=9,e.t0=e.catch(0),a({type:"PACKAGE_FAIL",payload:e.t0.response.data.data}),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}(0,x)).then((function(){T(!1),H.b.success("Package updated successfully",{position:H.b.POSITION.BOTTOM_RIGHT})})).catch((function(e){H.b.error(e.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT})})):t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PACKAGE_REQUEST"}),e.next=4,v.a.post("/packages",t);case 4:return n=e.sent,a({type:"PACKAGE_ADDED",payload:n.data.data}),e.abrupt("return",Promise.resolve());case 9:return e.prev=9,e.t0=e.catch(0),a({type:"PACKAGE_FAIL",payload:e.t0.response.data.data}),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}(0,x)).then((function(){T(!1),H.b.success("Package added successfully",{position:H.b.POSITION.BOTTOM_RIGHT})})).catch((function(e){H.b.error(e.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT})})))},children:[Object(N.jsx)(G.a.Header,{closeButton:!0,children:Object(N.jsx)(G.a.Title,{children:"Add Package"})}),Object(N.jsxs)(G.a.Body,{children:[[{key:"id",title:"Name",type:"hidden",placeholder:"Package ID",control_id:"formPackageId",hidden:!0},{key:"name",title:"Name",type:"text",placeholder:"Enter package name",control_id:"formPackageName",errorMsg:"Please provide package name.",required:!0},{key:"description",title:"Description",type:"text",placeholder:"Enter package description",control_id:"formPackageDescription",errorMsg:"Please provide package description.",required:!0},{key:"multiplier",title:"Multiplier",type:"number",placeholder:"Enter package multiplier",control_id:"formPackageMultiplier",errorMsg:"Please provide package multiplier.",min:0,required:!0}].map((function(e,t){return Object(N.jsxs)(k.a.Group,{hidden:e.hidden,as:h.a,controlId:e.control_id,children:[Object(N.jsx)(k.a.Label,{column:!0,sm:3,children:e.title}),Object(N.jsxs)(O.a,{sm:9,children:["number"==e.type?Object(N.jsx)(k.a.Control,{required:e.required,type:e.type,min:e.min,placeholder:e.placeholder,value:x[e.key],onChange:function(t){return f((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t.target.value))}))}}):Object(N.jsx)(k.a.Control,{required:e.required,type:e.type,placeholder:e.placeholder,value:x[e.key],onChange:function(t){return f((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t.target.value))}))}}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:e.errorMsg})]})]},t)})),Object(N.jsx)(z.a,{isMulti:!0,cacheOptions:!0,defaultOptions:!0,defaultValue:x.rewards,loadOptions:function(e){return new Promise((function(t){setTimeout((function(){t(M(e))}),1e3)}))},onChange:function(e){return f((function(t){return Object(d.a)(Object(d.a)({},t),{},{rewards:e})}))},placeholder:"None"},0)]}),Object(N.jsxs)(G.a.Footer,{children:[Object(N.jsx)(E.a,{variant:"secondary",onClick:A,children:"Close"}),Object(N.jsx)(E.a,{variant:"primary",type:"submit",children:"Save Changes"})]})]})})]}),Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{md:12,children:[Object(N.jsxs)(F.a,{responsive:!0,hover:!0,size:"sm",children:[Object(N.jsx)("thead",{className:"table-dark",children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"Name"}),Object(N.jsx)("th",{children:"Description"}),Object(N.jsx)("th",{children:"Multiplier"}),Object(N.jsx)("th",{children:"Created"}),Object(N.jsx)("th",{children:"Updated"}),Object(N.jsx)("th",{children:"Actions"})]})}),Object(N.jsx)("tbody",{children:R.a.isEmpty(a.data.data)?a.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):""!==a.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:a.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"No data available"})}):a.data.data.map((function(e,t){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:e.name}),Object(N.jsx)("td",{children:e.description}),Object(N.jsx)("td",{children:e.multiplier}),Object(N.jsx)("td",{children:Y(e.created_at)}),Object(N.jsx)("td",{children:Y(e.updated_at)}),Object(N.jsx)("td",{children:Object(N.jsxs)(B.a,{size:"sm",children:[Object(N.jsx)(E.a,{variant:"danger",onClick:function(){L(e.id)},children:"Delete"}),Object(N.jsx)(E.a,{onClick:function(t){return(a=e).rewards.map((function(e,t){return e.value=e.reward_id,e.label=e.reward.name,e})),f(a),void T(!0);var a},children:"Edit"})]})})]},t)}))})]}),Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:function(){if(!R.a.isEmpty(a.data.links))return a.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return I(e.url)},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}()})]})}),Object(N.jsx)(H.a,{})]})},ne="/actions",ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return function(){var e=Object(j.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"ACTION_REQUEST"}),e.next=3,v.a.get(t).then((function(e){a({type:"ACTION_FETCH",payload:e.data.data})})).catch((function(e){e.response&&a({type:"ACTION_FAIL",payload:e.response.data.message})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},re=function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.Action})),r=Object(n.useState)(!1),s=Object(u.a)(r,2),i=s[0],l=s[1],p=Object(n.useState)({}),m=Object(u.a)(p,2),x=m[0],f=m[1],g=Object(n.useState)(!1),_=Object(u.a)(g,2),w=_[0],C=_[1],S=function(){return C(!1)},T=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/actions";t(ce(e,a))},A=function(e){t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"ACTION_REQUEST"}),e.next=3,v.a.delete("/actions/"+t).then((function(e){a({type:"ACTION_DELETE",payload:e.data.data})})).catch((function(e){e.response&&a({type:"ACTION_FAIL",payload:e.response.data.message})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(0,e))},I=function(e){var t=q.a.tz.guess(!0);return(e=q.a.tz(e,y.url.TIMEZONE)).tz(t).format("YYYY-MM-DD hh:mm:ss A")};return c.a.useEffect((function(){T()}),[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:12,children:Object(N.jsx)(E.a,{variant:"primary",onClick:function(){f({}),C(!0)},children:"Add Action"})}),Object(N.jsx)(G.a,{show:w,onHide:S,children:Object(N.jsxs)(k.a,{noValidate:!0,validated:i,onSubmit:function(e){e.preventDefault(),e.stopPropagation();var a=e.currentTarget;l(!0),!1!==a.checkValidity()&&(x.id?t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"ACTION_REQUEST"}),e.next=3,v.a.put("/actions/"+t.id,t).then((function(e){return a({type:"ACTION_UPDATE",payload:e.data.data}),Promise.resolve()})).catch((function(e){return e.response&&a({type:"ACTION_FAIL",payload:e.response.data.message}),Promise.reject(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(0,x)).then((function(){C(!1),H.b.success("Action updated successfully",{position:H.b.POSITION.BOTTOM_RIGHT})})).catch((function(e){H.b.error(e.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT})})):t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"ACTION_REQUEST"}),e.next=3,v.a.post(ne,t).then((function(e){return a({type:"ACTION_ADD",payload:e.data.data}),Promise.resolve()})).catch((function(e){return e.response&&a({type:"ACTION_FAIL",payload:e.response.data.message}),Promise.reject(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(0,x)).then((function(){C(!1),H.b.success("Action added successfully",{position:H.b.POSITION.BOTTOM_RIGHT})})).catch((function(e){H.b.error(e.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT})})))},children:[Object(N.jsx)(G.a.Header,{closeButton:!0,children:Object(N.jsx)(G.a.Title,{children:"Add Action"})}),Object(N.jsx)(G.a.Body,{children:[{key:"id",title:"Name",type:"hidden",placeholder:"Action ID",control_id:"formActionId",hidden:!0},{key:"name",title:"Name",type:"text",placeholder:"Enter action name",control_id:"formActionName",errorMsg:"Please provide action name.",required:!0},{key:"description",title:"Description",type:"text",placeholder:"Enter action description",control_id:"formActionDescription",errorMsg:"Please provide action description.",required:!0}].map((function(e,t){return Object(N.jsxs)(k.a.Group,{hidden:e.hidden,as:h.a,controlId:e.control_id,children:[Object(N.jsx)(k.a.Label,{column:!0,sm:3,children:e.title}),Object(N.jsxs)(O.a,{sm:9,children:[Object(N.jsx)(k.a.Control,{required:e.required,type:e.type,placeholder:e.placeholder,value:R.a.isUndefined(x[e.key])?"":x[e.key],onChange:function(t){return f((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t.target.value))}))}}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:e.errorMsg})]})]},t)}))}),Object(N.jsxs)(G.a.Footer,{children:[Object(N.jsx)(E.a,{variant:"secondary",onClick:S,children:"Close"}),Object(N.jsx)(E.a,{variant:"primary",type:"submit",children:"Save Changes"})]})]})})]}),Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{md:12,children:[Object(N.jsxs)(F.a,{responsive:!0,hover:!0,size:"sm",children:[Object(N.jsx)("thead",{className:"table-dark",children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"Name"}),Object(N.jsx)("th",{children:"Description"}),Object(N.jsx)("th",{children:"Created"}),Object(N.jsx)("th",{children:"Updated"}),Object(N.jsx)("th",{children:"Actions"})]})}),Object(N.jsx)("tbody",{children:R.a.isEmpty(a.data.data)?a.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):""!==a.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:a.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"No data available"})}):a.data.data.map((function(e,t){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:e.name}),Object(N.jsx)("td",{children:e.description}),Object(N.jsx)("td",{children:I(e.created_at)}),Object(N.jsx)("td",{children:I(e.updated_at)}),Object(N.jsx)("td",{children:Object(N.jsxs)(B.a,{size:"sm",children:[Object(N.jsx)(E.a,{variant:"danger",onClick:function(){A(e.id)},children:"Delete"}),Object(N.jsx)(E.a,{onClick:function(t){return f(e),void C(!0)},children:"Edit"})]})})]},t)}))})]}),Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:function(){if(!R.a.isEmpty(a.data.links))return a.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return T(e.url)},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}()})]})}),Object(N.jsx)(H.a,{})]})},se=re,ie="/campaigns",le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie;return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"CAMPAIGN_REQUEST"}),e.next=4,v.a.get(t);case 4:n=e.sent,a({type:"CAMPAIGN_FETCH",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a({type:"CAMPAIGN_FAIL",payload:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},oe=function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"CAMPAIGN_REQUEST"}),e.next=4,v.a.delete("/campaigns/"+t);case 4:n=e.sent,a({type:"CAMPAIGN_DELETE",payload:n.data.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data),a({type:"CAMPAIGN_FAIL",payload:e.t0.response.data.data});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},de=a(65),je=a.n(de),ue=a(147),be=a.n(ue),he=(a(201),function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.Campaign})),r=Object(n.useState)({loading:!1,data:[],errorMsg:""}),s=Object(u.a)(r,2),i=s[0],l=s[1],p=Object(n.useState)(!1),m=Object(u.a)(p,2),x=m[0],f=m[1],g=Object(n.useState)({}),_=Object(u.a)(g,2),w=_[0],C=_[1],S=Object(n.useState)({}),T=Object(u.a)(S,2),A=T[0],I=T[1],M=Object(n.useState)(!1),L=Object(u.a)(M,2),Y=L[0],Q=L[1],V=Object(n.useState)(!1),K=Object(u.a)(V,2),J=K[0],Z=K[1],X=function(){return Q(!1)},$=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),l(Object(d.a)(Object(d.a)({},i),{},{loading:!0})),e.next=4,v.a.get("/campaigns/"+t);case 4:a=e.sent,n=a.data.data,l(Object(d.a)(Object(d.a)({},i),{},{data:n,loading:!1}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();c.a.useEffect((function(){ee()}),[]);var ee=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/campaigns";t(le(e,a))},te=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n,c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/actions?search="+t);case 2:for(a=e.sent,n=a.data.data,c=[],r=0;r<n.data.length;r++)s=n.data[r],c=[].concat(Object(D.a)(c),[{value:s.id,label:s.name}]);return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(j.a)(o.a.mark((function e(){var t,a,n,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/rewards");case 2:for(t=e.sent,a=t.data.data,n=[],c=0;c<a.data.length;c++)r=a.data[c],n=[].concat(Object(D.a)(n),[{value:r.id,label:r.name}]);return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(j.a)(o.a.mark((function e(){var t,a,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(d.a)(Object(d.a)({},A),{},{campaign_id:i.data.id}),e.next=3,v.a.post("/campaign_rewards",t);case 3:a=e.sent,n=a.data.data,(c=i).data.campaigns.data=[n].concat(Object(D.a)(c.data.campaigns.data)),l(Object(d.a)(Object(d.a)({},i),c));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(j.a)(o.a.mark((function e(a,n){var c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next="campaign"===e.t0?3:11;break;case 3:return e.next=5,v.a.delete("campaign_rewards/"+a);case 5:return c=e.sent,r=c.data.data,(s=i.data).campaigns.data=s.campaigns.data.filter((function(e){return e.id!==r.id})),l(Object(d.a)(Object(d.a)({},i),{},{data:s})),e.abrupt("break",13);case 11:return t(oe(0,a)),e.abrupt("break",13);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),re=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(t);case 2:a=e.sent,n=a.data.data,l(Object(d.a)(Object(d.a)({},i),{},{data:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e){switch(e){case"campaigns":if(!R.a.isEmpty(i.data.campaigns)&&!R.a.isEmpty(i.data.campaigns.links))return i.data.campaigns.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return re(e.url)},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}));break;default:if(!R.a.isEmpty(a.data.links))return a.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return ee(e.url)},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}},de=function(e){var t=q.a.tz.guess(!0);return(e=q.a.tz(e,y.url.TIMEZONE)).tz(t)};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(h.a,{children:Object(N.jsx)(O.a,{md:12,children:Object(N.jsx)(E.a,{variant:"primary",onClick:function(){C({start_date:new Date,end_date:new Date}),Q(!0)},children:"Add Campaign"})})}),Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{md:12,children:[Object(N.jsxs)(F.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(N.jsx)("thead",{className:"table-dark",children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"Name"}),Object(N.jsx)("th",{children:"Description"}),Object(N.jsx)("th",{children:"Start"}),Object(N.jsx)("th",{children:"End"}),Object(N.jsx)("th",{children:"Created"}),Object(N.jsx)("th",{children:"Updated"}),Object(N.jsx)("th",{children:"Actions"})]})}),Object(N.jsx)("tbody",{children:R.a.isEmpty(a.data.data)?a.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"7",className:"text-center",children:"Loading..."})}):""!==a.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"7",className:"text-center",children:a.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"7",className:"text-center",children:"No data available"})}):a.data.data.map((function(e,t){return Object(N.jsxs)("tr",{children:[Object(N.jsxs)("td",{children:[e.name," ",Object(N.jsx)(W.a,{variant:e.is_expired?"danger":"success",children:e.is_expired?"expired":"active"})]}),Object(N.jsx)("td",{children:e.description}),Object(N.jsx)("td",{children:Object(N.jsx)(je.a,{format:"YYYY/MM/DD",children:de(e.start_date)})}),Object(N.jsx)("td",{children:Object(N.jsx)(je.a,{format:"YYYY/MM/DD",children:de(e.end_date)})}),Object(N.jsx)("td",{children:Object(N.jsx)(je.a,{format:"YYYY/MM/DD hh:mm:ss",children:de(e.created_at)})}),Object(N.jsx)("td",{children:Object(N.jsx)(je.a,{format:"YYYY/MM/DD hh:mm:ss",children:de(e.updated_at)})}),Object(N.jsx)("td",{children:Object(N.jsxs)(B.a,{size:"sm",children:[Object(N.jsx)(E.a,{variant:"success",onClick:function(){$(e.id)},children:"Rewards"}),Object(N.jsx)(E.a,{variant:"danger",onClick:function(){ce(e.id)},children:"Delete"}),Object(N.jsx)(E.a,{onClick:function(t){return C({id:(a=e).id,name:a.name,description:a.description,start_date:new Date(a.start_date),end_date:new Date(a.end_date)}),void Q(!0);var a},children:"Edit"})]})})]},t)}))})]}),Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:se()})]})}),Object(N.jsx)(G.a,{show:Y,onHide:X,children:Object(N.jsxs)(k.a,{noValidate:!0,validated:x,onSubmit:function(e){e.preventDefault(),e.stopPropagation();var a=e.currentTarget;f(!0),!1!==a.checkValidity()&&(w.id?t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"CAMPAIGN_REQUEST"}),e.next=4,v.a.put("/campaigns/"+t.id,t);case 4:return n=e.sent,a({type:"CAMPAIGN_UPDATE",payload:n.data.data}),e.abrupt("return",Promise.resolve());case 9:return e.prev=9,e.t0=e.catch(0),a({type:"CAMPAIGN_FAIL",payload:e.t0.response.data.data}),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}(0,w)).then((function(){Q(!1),H.b.success("Campaign added successfully",{position:H.b.POSITION.BOTTOM_RIGHT})})).catch((function(e){H.b.error(e.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT})})):t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"CAMPAIGN_REQUEST"}),e.next=4,v.a.post(ie,t);case 4:return n=e.sent,a({type:"CAMPAIGN_ADD",payload:n.data.data}),e.abrupt("return",Promise.resolve());case 9:return e.prev=9,e.t0=e.catch(0),a({type:"CAMPAIGN_FAIL",payload:e.t0.response.data.data}),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}(0,w)).then((function(){Q(!1),H.b.success("Campaign added successfully",{position:H.b.POSITION.BOTTOM_RIGHT})})).catch((function(e){H.b.error(e.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT})})))},children:[Object(N.jsx)(G.a.Header,{closeButton:!0,children:Object(N.jsx)(G.a.Title,{children:R.a.isUndefined(w.id)?"Add Campaign":"Edit Campaign"})}),Object(N.jsx)(G.a.Body,{children:[{key:"id",title:"ID",type:"hidden",placeholder:"Campaign ID",control_id:"formCampaignId",hidden:!0},{key:"name",title:"Name",type:"text",placeholder:"Enter campaign name",errorMsg:"Please provide campaign name.",control_id:"formCampaignName",required:!0},{key:"description",title:"Description",type:"text",placeholder:"Enter campaign description",errorMsg:"Please provide campaign description.",control_id:"formCampaignDescription",required:!0},{key:"start_date",title:"Start Date",type:"datepicker",placeholder:"Enter campaign start date",errorMsg:"Please provide campaign name.",control_id:"formStartDescription",required:!0},{key:"end_date",title:"End Date",type:"datepicker",placeholder:"Enter campaign end date",control_id:"formEndDescription",required:!0}].map((function(e,t){return"text"===e.type?Object(N.jsxs)(k.a.Group,{hidden:e.hidden,as:h.a,controlId:e.control_id,children:[Object(N.jsx)(k.a.Label,{column:!0,sm:3,children:e.title}),Object(N.jsxs)(O.a,{sm:9,children:[Object(N.jsx)(k.a.Control,{required:e.required,type:e.type,placeholder:e.placeholder,value:R.a.isUndefined(w[e.key])?"":w[e.key],onChange:function(t){return C((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t.target.value))}))}}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:e.errorMsg})]})]},t):"select"===e.type?Object(N.jsxs)(k.a.Group,{hidden:e.hidden,as:h.a,controlId:e.control_id,children:[Object(N.jsx)(k.a.Label,{column:!0,sm:3,children:e.title}),Object(N.jsxs)(O.a,{sm:9,children:[Object(N.jsx)(k.a.Control,{size:"sm",required:e.required,as:e.type,placeholder:e.placeholder,value:R.a.isUndefined(w[e.key])?"":w[e.key],onChange:function(t){return C((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t.target.value))}))},children:e.options.map((function(e,t){return Object(N.jsx)("option",{value:e.key,children:e.label},t)}))}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:e.errorMsg})]})]},t):"datepicker"===e.type?Object(N.jsxs)(k.a.Group,{hidden:e.hidden,as:h.a,controlId:e.control_id,children:[Object(N.jsx)(k.a.Label,{column:!0,sm:3,children:e.title}),Object(N.jsxs)(O.a,{sm:9,children:[Object(N.jsx)(be.a,{className:"form-control",minDate:new Date,dateFormat:"MM/dd/yyyy",selected:w[e.key],onChange:function(t){return C((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,null==t?new Date:t))}))},required:e.required}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:e.errorMsg})]})]},t):void 0}))}),Object(N.jsxs)(G.a.Footer,{children:[Object(N.jsx)(E.a,{variant:"secondary",onClick:X,children:"Close"}),Object(N.jsx)(E.a,{variant:"primary",type:"submit",children:"Save Changes"})]})]})}),Object(N.jsxs)(G.a,{show:J,onHide:function(){return Z(!1)},children:[Object(N.jsx)(G.a.Header,{closeButton:!0,children:Object(N.jsx)(G.a.Title,{children:"Rewards"})}),Object(N.jsxs)(G.a.Body,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"12",children:"Action:"}),Object(N.jsx)(O.a,{md:"12",children:Object(N.jsx)(z.a,{cacheOptions:!0,defaultOptions:!0,loadOptions:function(e){return new Promise((function(t){setTimeout((function(){t(te(e))}),1e3)}))},onChange:function(e){return I((function(t){return Object(d.a)(Object(d.a)({},t),{},{action_id:e.value})}))}})}),Object(N.jsx)(O.a,{md:"12",children:"Reward:"}),Object(N.jsx)(O.a,{md:"12",children:Object(N.jsx)(z.a,{cacheOptions:!0,defaultOptions:!0,loadOptions:function(e){return new Promise((function(t){setTimeout((function(){t(ae(e))}),1e3)}))},onChange:function(e){return I((function(t){return Object(d.a)(Object(d.a)({},t),{},{reward_id:e.value})}))}})}),Object(N.jsx)(O.a,{md:"12",children:Object(N.jsx)(E.a,{onClick:ne,children:"Add"})})]}),Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{md:"12",children:[Object(N.jsxs)(F.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"Reward"}),Object(N.jsx)("th",{children:"Action"})]})}),Object(N.jsx)("tbody",{children:R.a.isEmpty(i.data.campaigns)||R.a.isEmpty(i.data.campaigns.data)?i.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):""!==i.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:a.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"No data available"})}):i.data.campaigns.data.map((function(e,t){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:e.reward.name}),Object(N.jsx)("td",{children:e.action.name}),Object(N.jsx)("td",{children:Object(N.jsx)(B.a,{size:"sm",children:Object(N.jsx)(E.a,{variant:"danger",onClick:function(){ce(e.id,"campaign")},children:"Delete"})})})]},t)}))})]}),Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:se("campaigns")})]})})]})]}),Object(N.jsx)(H.a,{})]})}),Oe=function(e){var t=Object(b.c)((function(e){return e.Auth}));return 1===t.user.type||2===t.user.type?he(e):function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.Campaign}));c.a.useEffect((function(){n()}),[]);var n=function(){t(le(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/campaigns"))};return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(h.a,{className:"pt-3",children:R.a.isEmpty(a.data.data)?a.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):""!==a.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:a.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"No data available"})}):a.data.data.map((function(e,t){return Object(N.jsx)(O.a,{md:4,children:Object(N.jsx)(m.a,{children:Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:e.name}),Object(N.jsxs)(m.a.Text,{children:[Object(N.jsx)(h.a,{children:Object(N.jsx)(O.a,{children:e.description})}),Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{children:["Expiration: ",e.end_date]})})]})]})},t)})}))})})}(e)},pe=function(e){Object(b.b)();var t=e.match.params.campaign,a=Object(n.useState)(""),r=Object(u.a)(a,2),s=(r[0],r[1],Object(n.useState)({})),i=Object(u.a)(s,2),l=i[0],d=i[1];c.a.useEffect((function(){p()}),[]);var p=function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/campaigns/"+t);case 2:n=e.sent,console.log(n.data.data),d(n.data.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:"12",children:l.name}),Object(N.jsx)(O.a,{md:"12",children:l.description})]})})},me="/rewards",xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me;return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"REWARD_REQUEST"}),e.next=4,v.a.get(t);case 4:n=e.sent,a({type:"REWARD_FETCH",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a({type:"REWARD_FAIL",payload:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},fe=(a(284),function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.Reward})),r=Object(n.useState)(!1),s=Object(u.a)(r,2),i=s[0],l=s[1],p=Object(n.useState)({}),m=Object(u.a)(p,2),x=m[0],f=m[1],g=Object(n.useState)(!1),_=Object(u.a)(g,2),w=_[0],C=_[1],S=function(){return C(!1)};c.a.useEffect((function(){T()}),[]);var T=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/rewards";t(xe(e,a))},A=function(e){t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"REWARD_REQUEST"}),e.next=4,v.a.delete("/rewards/"+t);case 4:n=e.sent,a({type:"REWARD_DELETE",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a({type:"REWARD_FAIL",payload:e.t0.response.data.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}(0,e))},I=function(e){var t=q.a.tz.guess(!0);return(e=q.a.tz(e,y.url.TIMEZONE)).tz(t).format("YYYY-MM-DD hh:mm:ss A")};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(h.a,{children:[Object(N.jsx)(O.a,{md:12,children:Object(N.jsx)(E.a,{variant:"primary",onClick:function(){f({type:"item"}),C(!0)},children:"Add Reward"})}),Object(N.jsx)(G.a,{show:w,onHide:S,children:Object(N.jsxs)(k.a,{noValidate:!0,validated:i,onSubmit:function(e){e.preventDefault(),e.stopPropagation();var a=e.currentTarget;l(!0),!1!==a.checkValidity()&&(x.id?t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"REWARD_REQUEST"}),e.next=4,v.a.put("/rewards/"+t.id,t);case 4:return n=e.sent,a({type:"REWARD_UPDATE",payload:n.data.data}),e.abrupt("return",Promise.resolve());case 9:return e.prev=9,e.t0=e.catch(0),a({type:"REWARD_FAIL",payload:e.t0.response.data}),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}(0,x)).then((function(){C(!1),H.b.success("Reward edited successfully",{position:H.b.POSITION.BOTTOM_RIGHT})})).catch((function(e){H.b.error(e.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT})})):t(function(e,t){return function(){var e=Object(j.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"REWARD_REQUEST"}),e.next=4,v.a.post(me,t);case 4:return n=e.sent,a({type:"REWARD_ADD",payload:n.data.data}),e.abrupt("return",Promise.resolve());case 9:return e.prev=9,e.t0=e.catch(0),a({type:"REWARD_FAIL",payload:e.t0.response.data}),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}(0,x)).then((function(){C(!1),H.b.success("Reward added successfully",{position:H.b.POSITION.BOTTOM_RIGHT})})).catch((function(e){H.b.error(e.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT})})))},children:[Object(N.jsx)(G.a.Header,{closeButton:!0,children:Object(N.jsx)(G.a.Title,{children:"Add Reward"})}),Object(N.jsx)(G.a.Body,{children:[{key:"id",title:"Name",type:"hidden",placeholder:"Reward ID",control_id:"formActionId",hidden:!0},{key:"type",title:"Type",type:"select",placeholder:"Enter action type",errorMsg:"Please select type.",options:[{label:"Item",key:"item"},{label:"Discount",key:"discount"},{label:"Points",key:"points"}],control_id:"formActionType",required:!0},{key:"value",title:"Value",type:"number",min:0,placeholder:"Enter reward value",errorMsg:"Please provide reward value.",control_id:"formValue",required:!0},{key:"cost",title:"Cost",type:"number",min:0,placeholder:"Enter reward cost",errorMsg:"Please provide reward cost.",control_id:"formCost",required:!0},{key:"name",title:"Name",type:"text",placeholder:"Enter reward name",errorMsg:"Please provide reward name.",control_id:"formActionName",required:!0},{key:"description",title:"Description",type:"text",placeholder:"Enter reward description",errorMsg:"Please provide reward description.",control_id:"formActionDescription",required:!0}].map((function(e,t){return"text"===e.type?Object(N.jsxs)(k.a.Group,{hidden:e.hidden,as:h.a,controlId:e.control_id,children:[Object(N.jsx)(k.a.Label,{column:!0,sm:3,children:e.title}),Object(N.jsxs)(O.a,{sm:9,children:[Object(N.jsx)(k.a.Control,{required:e.required,type:e.type,placeholder:e.placeholder,value:R.a.isUndefined(x[e.key])?"":x[e.key],onChange:function(t){return f((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t.target.value))}))}}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:e.errorMsg})]})]},t):"number"===e.type&&"cost"!=e.key&&"item"!=x.type||"number"===e.type&&"cost"===e.key&&"item"==x.type?Object(N.jsxs)(k.a.Group,{hidden:e.hidden,as:h.a,controlId:e.control_id,children:[Object(N.jsx)(k.a.Label,{column:!0,sm:3,children:e.title}),Object(N.jsxs)(O.a,{sm:9,children:[Object(N.jsx)(k.a.Control,{required:e.required,type:e.type,placeholder:e.placeholder,value:R.a.isUndefined(x[e.key])?"":x[e.key],min:e.min,onChange:function(t){return f((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t.target.value))}))}}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:e.errorMsg})]})]},t):"select"===e.type?Object(N.jsxs)(k.a.Group,{hidden:e.hidden,as:h.a,controlId:e.control_id,children:[Object(N.jsx)(k.a.Label,{column:!0,sm:3,children:e.title}),Object(N.jsxs)(O.a,{sm:9,children:[Object(N.jsx)(k.a.Control,{size:"sm",required:e.required,as:e.type,placeholder:e.placeholder,value:R.a.isUndefined(x[e.key])?"":x[e.key],onChange:function(t){return f((function(a){return Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e.key,t.target.value))}))},children:e.options.map((function(e,t){return Object(N.jsx)("option",{value:e.key,children:e.label},t)}))}),Object(N.jsx)(k.a.Control.Feedback,{type:"invalid",children:e.errorMsg})]})]},t):void 0}))}),Object(N.jsxs)(G.a.Footer,{children:[Object(N.jsx)(E.a,{variant:"secondary",onClick:S,children:"Close"}),Object(N.jsx)(E.a,{variant:"primary",type:"submit",children:"Save Changes"})]})]})})]}),Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{md:12,children:[Object(N.jsxs)(F.a,{responsive:!0,hover:!0,size:"sm",children:[Object(N.jsx)("thead",{className:"table-dark",children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"Name"}),Object(N.jsx)("th",{children:"Description"}),Object(N.jsx)("th",{children:"Type"}),Object(N.jsx)("th",{children:"Created"}),Object(N.jsx)("th",{children:"Updated"}),Object(N.jsx)("th",{children:"Actions"})]})}),Object(N.jsx)("tbody",{children:R.a.isEmpty(a.data.data)?a.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):""!==a.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:a.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"No data available"})}):a.data.data.map((function(e,t){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:e.name}),Object(N.jsx)("td",{children:e.description}),Object(N.jsx)("td",{children:e.type}),Object(N.jsx)("td",{children:I(e.created_at)}),Object(N.jsx)("td",{children:I(e.updated_at)}),Object(N.jsx)("td",{children:Object(N.jsxs)(B.a,{size:"sm",children:[Object(N.jsx)(E.a,{variant:"danger",onClick:function(){A(e.id)},children:"Delete"}),Object(N.jsx)(E.a,{onClick:function(t){return f(e),void C(!0)},children:"Edit"})]})})]},t)}))})]}),Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:function(){if(!R.a.isEmpty(a.data.links))return a.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return T(e.url)},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}()})]})}),Object(N.jsx)(H.a,{})]})}),ge=function(e){var t=Object(b.c)((function(e){return e.Auth}));return 1===t.user.type||2===t.user.type?fe(e):function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.Reward})),n=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("redeem",{reward_id:t});case 3:e.sent.data.data,H.b.success("Redemption successful",{position:H.b.POSITION.BOTTOM_RIGHT}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),H.b.error(e.t0.response.data.message,{position:H.b.POSITION.BOTTOM_RIGHT});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),r=function(){t(xe(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/rewards"))};return c.a.useEffect((function(){r()}),[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(h.a,{className:"pt-3",children:Object(N.jsxs)(m.a,{className:"reward-container ml-5 mr-5",children:[Object(N.jsx)(m.a.Body,{className:"row",children:R.a.isEmpty(a.data.data)?a.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):""!==a.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:a.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"6",className:"text-center",children:"No data available"})}):a.data.data.map((function(e,t){return Object(N.jsx)(O.a,{md:4,className:"mb-3 reward-content",children:Object(N.jsxs)(m.a,{style:{height:"100%"},children:[Object(N.jsxs)(m.a.Body,{children:[Object(N.jsx)(m.a.Title,{children:e.name}),Object(N.jsx)(m.a.Text,{children:e.description})]}),"points"!=e.type?Object(N.jsxs)(E.a,{variant:"dark",onClick:function(){return n(e.id)},children:["Redeem (",e.cost," PTS)"]}):""]})},t)}))}),Object(N.jsx)(m.a.Body,{className:"row",children:Object(N.jsx)(O.a,{md:12,children:Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:function(){if(!R.a.isEmpty(a.data.links))return a.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return r(e.url)},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}()})})})]})}),Object(N.jsx)(H.a,{})]})}(e)},ve="/transactions",ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){var e=Object(j.a)(o.a.mark((function e(n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:"REQUEST"}),e.next=4,v.a.get(t,{params:a});case 4:c=e.sent,n({type:"FETCH_SUCCESS",payload:c.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n({type:"FAIL",payload:e.t0.response.data.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},Ne=a(99),_e=(a(286),a(30)),ke=a.n(_e),we=function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.Transaction})),r=Object(n.useState)(!1),s=Object(u.a)(r,2),i=(s[0],s[1],Object(n.useState)({})),l=Object(u.a)(i,2),p=(l[0],l[1],Object(n.useState)({})),m=Object(u.a)(p,2),x=(m[0],m[1],Object(n.useState)({type:"all"})),f=Object(u.a)(x,2),g=f[0],y=f[1],_=Object(n.useState)(!1),w=Object(u.a)(_,2),C=(w[0],w[1],Object(n.useState)(!1)),S=Object(u.a)(C,2),T=S[0],A=S[1],I=Object(n.useState)({}),M=Object(u.a)(I,2),D=M[0],L=M[1],B=function(){A(!1),L({})},z=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("transactions/"+D.id,D).then((function(e){t({type:"UPDATE_SUCCESS",payload:e.data.data}),B()})).catch((function(e){e.response&&t({type:"FAIL",payload:e.response.data.message})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.a.useEffect((function(){H()}),[]);var H=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/transactions",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;t(ye(e,a,n))},Y=function(e,t){var a=g;a=Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e,t)),y(a),H("/transactions",a)};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{md:12,children:[Object(N.jsx)(k.a.Group,{controlId:"exampleForm.SelectCustom",children:Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Type"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsxs)(k.a.Control,{as:"select",size:"sm",custom:!0,defaultValue:R.a.isEmpty(g)||R.a.isEmpty(g.type)?"all":g.type,onChange:function(e){return function(e){var t=g;t=Object(d.a)(Object(d.a)({},t),{},{type:e}),y(t),H("/transactions",t)}(e.target.value)},children:[Object(N.jsx)("option",{value:"all",children:"All"}),Object(N.jsx)("option",{value:"rewards",children:"Rewards"}),Object(N.jsx)("option",{value:"redeems",children:"Redeems"})]})})]})}),Object(N.jsxs)(k.a.Group,{children:[Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Transaction ID"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(k.a.Control,{size:"sm",type:"text",placeholder:"e.g. abcd1234",onChange:function(e){return Y("transaction_id",e.target.value)}})})]}),Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Reference No."}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(k.a.Control,{size:"sm",type:"text",placeholder:"e.g. abcd1234",onChange:function(e){return Y("reference_no",e.target.value)}})})]}),Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Customer"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(k.a.Control,{size:"sm",type:"text",placeholder:"e.g. John Doe",onChange:function(e){return Y("customer",e.target.value)}})})]}),Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Salesperson"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(k.a.Control,{size:"sm",type:"text",placeholder:"e.g. Jane Doe",onChange:function(e){return Y("salesperson",e.target.value)}})})]}),Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Date"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(Ne.a,{initialSettings:{startDate:ke()(),endDate:ke()()},onCallback:function(e,t,a){var n=g;e=e.format("YYYY-MM-DD"),t=t.format("YYYY-MM-DD"),n=Object(d.a)(Object(d.a)({},n),{},{start_date:e,end_date:t}),y(n),H("/transactions",n)},children:Object(N.jsx)("input",{type:"text",className:"form-control"})})})]})]})]})}),Object(N.jsxs)(h.a,{children:[Object(N.jsxs)(G.a,{show:T,onHide:B,children:[Object(N.jsx)(G.a.Header,{closeButton:!0,children:Object(N.jsx)(G.a.Title,{children:"Are you sure?"})}),Object(N.jsxs)(G.a.Body,{children:[Object(N.jsxs)("p",{children:["You want to mark this as ",Object(N.jsx)("b",{children:R.a.isEmpty(D)?"":D.status}),"?"]}),R.a.isEmpty(D)||"confirmed"!=D.status?"":Object(N.jsxs)(k.a.Group,{controlId:"formBasicEmail",children:[Object(N.jsx)(k.a.Label,{children:"Reference No."}),Object(N.jsx)(k.a.Control,{type:"text",placeholder:"Enter reference no.",onChange:function(e){return L((function(t){return Object(d.a)(Object(d.a)({},t),{},{reference_no:e.target.value})}))}})]})]}),Object(N.jsxs)(G.a.Footer,{children:[Object(N.jsx)(E.a,{variant:"secondary",onClick:B,children:"Close"}),Object(N.jsx)(E.a,{variant:"primary",onClick:function(e){return z()},children:"Save Changes"})]})]}),Object(N.jsxs)(O.a,{md:12,children:[Object(N.jsxs)(F.a,{responsive:!0,hover:!0,size:"sm",children:[Object(N.jsx)("thead",{className:"table-dark",children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"Transaction ID"}),Object(N.jsx)("th",{children:"Type"}),Object(N.jsx)("th",{children:"Reference No."}),Object(N.jsx)("th",{children:"Running Balance"}),Object(N.jsx)("th",{children:"Cost"}),Object(N.jsx)("th",{children:"Customer"}),Object(N.jsx)("th",{children:"Salesperson"}),Object(N.jsx)("th",{children:"Created"}),Object(N.jsx)("th",{children:"Updated"}),Object(N.jsx)("th",{style:{width:"10%"},children:"Status"})]})}),Object(N.jsx)("tbody",{children:R.a.isEmpty(a.data.data)?a.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"10",className:"text-center",children:"Loading..."})}):""!==a.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"10",className:"text-center",children:a.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"10",className:"text-center",children:"No data available"})}):a.data.data.map((function(e,t){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:e.transaction_id}),Object(N.jsx)("td",{children:e.type}),Object(N.jsx)("td",{children:e.reference_no}),Object(N.jsx)("td",{children:e.balance}),Object(N.jsx)("td",{children:e.cost}),Object(N.jsx)("td",{children:e.customer.name}),Object(N.jsx)("td",{children:e.salesperson?e.salesperson.name:""}),Object(N.jsx)("td",{children:e.created_at}),Object(N.jsx)("td",{children:e.updated_at}),Object(N.jsx)("td",{children:Object(N.jsx)(k.a.Group,{controlId:"exampleForm.SelectCustom",children:Object(N.jsx)(k.a.Row,{children:Object(N.jsxs)(k.a.Control,{as:"select",size:"sm",custom:!0,value:e.status,onChange:function(t){return a=e.id,n=t.target.value,e.status,A(!0),void L({id:a,status:n});var a,n},children:[Object(N.jsx)("option",{value:"pending",children:"Pending"}),Object(N.jsx)("option",{value:"cancelled",children:"Cancelled"}),Object(N.jsx)("option",{value:"confirmed",children:"Confirmed"}),Object(N.jsx)("option",{value:"completed",children:"Completed"})]})})})})]},t)}))})]}),Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:function(){if(!R.a.isEmpty(a.data.links))return a.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return H(e.url,{})},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}()})]})]})]})},Ee=function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.Transaction})),r=Object(n.useState)(!1),s=Object(u.a)(r,2),i=(s[0],s[1],Object(n.useState)({})),l=Object(u.a)(i,2),p=(l[0],l[1],Object(n.useState)({})),m=Object(u.a)(p,2),x=(m[0],m[1],Object(n.useState)({type:"all"})),f=Object(u.a)(x,2),g=f[0],y=f[1],_=Object(n.useState)(!1),w=Object(u.a)(_,2),C=w[0],S=w[1],T=Object(n.useState)({}),A=Object(u.a)(T,2),I=A[0],M=A[1],D=function(){S(!1),M({})},L=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("transactions/"+I.id,I).then((function(e){t({type:"UPDATE_SUCCESS",payload:e.data.data}),D()})).catch((function(e){e.response&&t({type:"FAIL",payload:e.response.data.message})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.a.useEffect((function(){B()}),[]);var B=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/transactions",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;t(ye(e,a,n))},z=function(e,t){var a=g;a=Object(d.a)(Object(d.a)({},a),{},Object(P.a)({},e,t)),y(a),B("/transactions",a)};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(h.a,{children:Object(N.jsxs)(O.a,{md:12,children:[Object(N.jsx)(k.a.Group,{controlId:"exampleForm.SelectCustom",children:Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Type"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsxs)(k.a.Control,{as:"select",size:"sm",custom:!0,defaultValue:R.a.isEmpty(g)||R.a.isEmpty(g.type)?"all":g.type,onChange:function(e){return function(e){var t=g;t=Object(d.a)(Object(d.a)({},t),{},{type:e}),y(t),B("/transactions",t)}(e.target.value)},children:[Object(N.jsx)("option",{value:"all",children:"All"}),Object(N.jsx)("option",{value:"rewards",children:"Rewards"}),Object(N.jsx)("option",{value:"redeems",children:"Redeems"})]})})]})}),Object(N.jsxs)(k.a.Group,{children:[Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Transaction ID"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(k.a.Control,{size:"sm",type:"text",placeholder:"e.g. abcd1234",onChange:function(e){return z("transaction_id",e.target.value)}})})]}),Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Reference No."}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(k.a.Control,{size:"sm",type:"text",placeholder:"e.g. abcd1234",onChange:function(e){return z("reference_no",e.target.value)}})})]}),Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Salesperson"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(k.a.Control,{size:"sm",type:"text",placeholder:"e.g. Jane Doe",onChange:function(e){return z("salesperson",e.target.value)}})})]}),Object(N.jsxs)(k.a.Row,{children:[Object(N.jsx)(k.a.Label,{column:"sm",lg:1,children:"Date"}),Object(N.jsx)(O.a,{lg:3,children:Object(N.jsx)(Ne.a,{initialSettings:{startDate:ke()(),endDate:ke()()},onCallback:function(e,t,a){var n=g;e=e.format("YYYY-MM-DD"),t=t.format("YYYY-MM-DD"),n=Object(d.a)(Object(d.a)({},n),{},{start_date:e,end_date:t}),y(n),B("/transactions",n)},children:Object(N.jsx)("input",{type:"text",className:"form-control"})})})]})]})]})}),Object(N.jsxs)(h.a,{children:[Object(N.jsxs)(G.a,{show:C,onHide:D,children:[Object(N.jsx)(G.a.Header,{closeButton:!0,children:Object(N.jsx)(G.a.Title,{children:"Are you sure?"})}),Object(N.jsxs)(G.a.Body,{children:[Object(N.jsxs)("p",{children:["You want to mark this as ",Object(N.jsx)("b",{children:R.a.isEmpty(I)?"":I.status}),"?"]}),R.a.isEmpty(I)||"confirmed"!=I.status?"":Object(N.jsxs)(k.a.Group,{controlId:"formBasicEmail",children:[Object(N.jsx)(k.a.Label,{children:"Reference No."}),Object(N.jsx)(k.a.Control,{type:"text",placeholder:"Enter reference no.",onChange:function(e){return M((function(t){return Object(d.a)(Object(d.a)({},t),{},{reference_no:e.target.value})}))}})]})]}),Object(N.jsxs)(G.a.Footer,{children:[Object(N.jsx)(E.a,{variant:"secondary",onClick:D,children:"Close"}),Object(N.jsx)(E.a,{variant:"primary",onClick:function(e){return L()},children:"Save Changes"})]})]}),Object(N.jsxs)(F.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"Transaction ID"}),Object(N.jsx)("th",{children:"Type"}),Object(N.jsx)("th",{children:"Reference No."}),Object(N.jsx)("th",{children:"Running Balance"}),Object(N.jsx)("th",{children:"Cost"}),Object(N.jsx)("th",{children:"Customer"}),Object(N.jsx)("th",{children:"Salesperson"}),Object(N.jsx)("th",{children:"Created"}),Object(N.jsx)("th",{children:"Updated"}),Object(N.jsx)("th",{style:{width:"10%"},children:"Status"})]})}),Object(N.jsx)("tbody",{children:R.a.isEmpty(a.data.data)?a.loading?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"10",className:"text-center",children:"Loading..."})}):""!==a.errorMsg?Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"10",className:"text-center",children:a.errorMsg})}):Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:"10",className:"text-center",children:"No data available"})}):a.data.data.map((function(e,t){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:e.transaction_id}),Object(N.jsx)("td",{children:e.type}),Object(N.jsx)("td",{children:e.reference_no}),Object(N.jsx)("td",{children:e.balance}),Object(N.jsx)("td",{children:e.cost}),Object(N.jsx)("td",{children:e.customer.name}),Object(N.jsx)("td",{children:e.salesperson?e.salesperson.name:""}),Object(N.jsx)("td",{children:e.created_at}),Object(N.jsx)("td",{children:e.updated_at}),Object(N.jsx)("td",{children:Object(N.jsx)(W.a,{variant:"info",children:e.status})})]},t)}))})]}),Object(N.jsx)(U.a,{size:"sm",className:"float-right",children:function(){if(!R.a.isEmpty(a.data.links))return a.data.links.map((function(e,t){return Object(N.jsx)(U.a.Item,{active:e.active,onClick:function(){return B(e.url,{})},disabled:!e.url,children:Object(N.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},t)}))}()})]})]})},Ce=function(e){var t=Object(b.c)((function(e){return e.Auth}));return 1===t.user.type||2===t.user.type?we(e):Ee(e)},Se=(a(140),a(70),a(77)),Te=a(306),Ae=(a(287),a(100)),Ie=a(311),Me=a(152),Re=a(78),Pe=(a(141),a(288),a(295)),De=a(296),Le=a(297),Ue=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(0),l=Object(u.a)(i,2),h=l[0],O=l[1],p=Object(n.useState)(!1),m=Object(u.a)(p,2),x=m[0],f=m[1],g=Object(n.useState)(null),y=Object(u.a)(g,2),_=y[0],k=y[1],w=Object(n.useState)(0),C=Object(u.a)(w,2),S=(C[0],C[1],Object(n.useRef)(null)),T=Object(n.useState)({loading:!1,data:[]}),A=Object(u.a)(T,2),I=A[0],M=A[1],R=Object(b.c)((function(e){return e.Auth}));c.a.useEffect((function(){L(),P()}),[]);var P=function(){window.Echo.private("App.Models.User."+R.user.id).notification((function(e){var t={data:{data:e.data,title:e.title},created_at:q()()};M((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:[].concat(Object(D.a)(e.data),[t])})}))}))},L=function(){var e=Object(j.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("notifications");case 2:t=e.sent,a=t.data.data,M((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:a,loading:!1})})),O(a.filter((function(e){return null==e.read_at})).length),s(a.filter((function(e){return null==e.read_at})).length);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e){var t=q()(),a=q()(e),n=t.diff(a,"year");return 0===n?0===(n=t.diff(a,"month"))?0===(n=t.diff(a,"days"))?0===(n=t.diff(a,"hour"))?0===(n=t.diff(a,"minute"))?(n=t.diff(a,"second"),"".concat(n," second(s) ago")):"".concat(n," minute(s) ago"):"".concat(n," hour(s) ago"):"".concat(n," days(s) ago"):"".concat(n," month(s) ago"):"".concat(n," year(s) ago")},B=function(e){if(e.indexOf("\n")>=0){for(var t=e.split("\n"),a="<ul>",n=0;n<=t.length-1;n++)""!==t[n]&&(a=a+"<li>"+t[n]+"</li>");return{__html:a+="</ul>"}}return{__html:"<ul><li>".concat(e,"</li></ul>")}},G=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("notifications/read");case 2:e.sent,M((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:I.data.map((function(e,t){return Object(d.a)(Object(d.a)({},e),{},{read_at:q()().format()})}))})})),s(!1),O(0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"notification-container",children:Object(N.jsx)("div",{className:r?"notification notify show-count":"notification notify","data-count":h,onClick:function(e){return function(e){f(!x),k(e.target)}(e)},children:Object(N.jsx)(Pe.a,{color:"yellow",size:"25"})})}),Object(N.jsx)("div",{ref:S,children:Object(N.jsx)(Me.a,{show:x,target:_,placement:"bottom",container:S.current,containerPadding:20,rootClose:!0,onHide:function(){f(!1)},children:Object(N.jsxs)(Re.a,{id:"popover-contained",children:[Object(N.jsx)(Re.a.Title,{as:"h3",children:"Notifications"}),Object(N.jsxs)(Re.a.Content,{style:{padding:"3px 3px"},children:[Boolean(r)&&Object(N.jsx)("div",{children:Object(N.jsxs)(E.a,{variant:"link",onClick:function(e){return G(e)},children:[Object(N.jsx)(De.a,{size:24}),"Mark all as read"]})}),Object(N.jsx)("ul",{className:"notification-info-panel",children:I.data.length>0?I.data.map((function(e,t){return Object(N.jsxs)("li",{className:e.read_at?"notification-message":"notification-message unread",children:[Object(N.jsx)("div",{className:"timestamp",children:Object(N.jsx)("span",{children:U(parseInt(q.a.parseZone(e.created_at).format("x")))})}),Object(N.jsx)("div",{className:"content",dangerouslySetInnerHTML:B(e.data.title)})]},t)})):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Le.a,{color:"#000000",size:32}),Object(N.jsx)("h5",{className:"nodata",children:"No Notifications found!"})]})})]})]})})})]})},Be=function(e){return Object(N.jsxs)(Ie.a,{collapseOnSelect:!0,className:"sticky-top shadow-sm",expand:"*",bg:"light",variant:"light",children:[Object(N.jsx)(Ie.a.Brand,{className:"col-sm-3 col-md-2 mr-0 px-3",href:"#home",children:Object(N.jsx)("img",{alt:"",src:y.url.BASE_URL+"/icons/logo.png",height:"30",className:"d-inline-block align-top"})}),Object(N.jsx)("button",{className:"navbar-toggler position-absolute d-md-none collapsed",type:"button","data-toggle":"collapse","data-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(N.jsx)("span",{className:"navbar-toggler-icon"})}),Object(N.jsxs)("ul",{className:"navbar-nav px-3",children:[Object(N.jsx)("li",{className:"nav-item text-nowrap notification-section",children:Object(N.jsx)(Ue,{})}),Object(N.jsx)("li",{className:"nav-item text-nowrap",children:Object(N.jsx)(L.b,{className:"nav-link logout-btn",onClick:function(t){return e.onLogout()},children:"LOG OUT"})})]})]})},Ge=function(e){return Object(N.jsx)(Ie.a.Collapse,{id:"sidebarMenu",className:"col-md-4 col-lg-3 d-md-block bg-light sidebar collapse shadow",children:Object(N.jsx)("div",{className:"sidebar-sticky pt-3",children:Object(N.jsxs)("ul",{className:"nav flex-column",children:[Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/",children:[Object(N.jsx)("img",{alt:"Dashboard",src:y.url.BASE_URL+"/icons/dashboard-icon.png",width:"26",className:"d-inline-block align-top"}),"Dashboard ",Object(N.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/actions",children:[Object(N.jsx)("img",{alt:"Dashboard",src:y.url.BASE_URL+"/icons/actions-icon.png",width:"26",className:"d-inline-block align-top"}),"Actions"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/packages",children:[Object(N.jsx)("img",{alt:"Dashboard",src:y.url.BASE_URL+"/icons/package-icon.png",width:"26",className:"d-inline-block align-top"}),"Packages"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/rewards",children:[Object(N.jsx)("img",{alt:"Rewards",src:y.url.BASE_URL+"/icons/reward-icon.png",width:"26",className:"d-inline-block align-top"}),"Rewards"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/campaigns",children:[Object(N.jsx)("img",{alt:"Campaigns",src:y.url.BASE_URL+"/icons/campaign-icon.png",width:"26",className:"d-inline-block align-top"}),"Campaigns"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/users",children:[Object(N.jsx)("img",{alt:"Profile",src:y.url.BASE_URL+"/icons/profile-icon.png",width:"26",className:"d-inline-block align-top"}),"Users"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/transactions",children:[Object(N.jsx)("img",{alt:"Transactions",src:y.url.BASE_URL+"/icons/transaction-icon.png",width:"26",className:"d-inline-block align-top"}),"Transactions"]})})]})})})},Fe=function(e){return Object(N.jsxs)(Ie.a,{collapseOnSelect:!0,className:"sticky-top shadow-sm",expand:"*",bg:"dark",variant:"dark",children:[Object(N.jsx)(Ie.a.Brand,{className:"col-sm-3 col-md-2 mr-0 px-3",href:"#home",children:Object(N.jsx)("img",{alt:"",src:y.url.BASE_URL+"/icons/logo.png",height:"30",className:"d-inline-block align-top"})}),Object(N.jsx)("button",{className:"navbar-toggler position-absolute d-md-none collapsed",type:"button","data-toggle":"collapse","data-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(N.jsx)("span",{className:"navbar-toggler-icon"})}),Object(N.jsxs)("ul",{className:"navbar-nav px-3",children:[Object(N.jsx)("li",{className:"nav-item text-nowrap notification-section",children:Object(N.jsx)(Ue,{})}),Object(N.jsx)("li",{className:"nav-item text-nowrap",children:Object(N.jsx)(L.b,{className:"nav-link logout-btn",onClick:function(t){return e.onLogout()},children:"Logout"})})]})]})},ze=function(e){return Object(N.jsx)(Ie.a.Collapse,{id:"sidebarMenu",className:"col-md-4 col-lg-3 d-md-block bg-light sidebar collapse shadow",children:Object(N.jsx)("div",{className:"sidebar-sticky pt-3",children:Object(N.jsxs)("ul",{className:"nav flex-column",children:[Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/",children:[Object(N.jsx)("img",{alt:"Dashboard",src:y.url.BASE_URL+"/icons/dashboard-icon.png",width:"26",className:"d-inline-block align-top"}),"Dashboard ",Object(N.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/actions",children:[Object(N.jsx)("img",{alt:"Dashboard",src:y.url.BASE_URL+"/icons/actions-icon.png",width:"26",className:"d-inline-block align-top"}),"Actions"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/packages",children:[Object(N.jsx)("img",{alt:"Dashboard",src:y.url.BASE_URL+"/icons/package-icon.png",width:"26",className:"d-inline-block align-top"}),"Packages"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/rewards",children:[Object(N.jsx)("img",{alt:"Rewards",src:y.url.BASE_URL+"/icons/reward-icon.png",width:"26",className:"d-inline-block align-top"}),"Rewards"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/campaigns",children:[Object(N.jsx)("img",{alt:"Campaigns",src:y.url.BASE_URL+"/icons/campaign-icon.png",width:"26",className:"d-inline-block align-top"}),"Campaigns"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/users",children:[Object(N.jsx)("img",{alt:"Profile",src:y.url.BASE_URL+"/icons/profile-icon.png",width:"26",className:"d-inline-block align-top"}),"Users"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/transactions",children:[Object(N.jsx)("img",{alt:"Transactions",src:y.url.BASE_URL+"/icons/transaction-icon.png",width:"26",className:"d-inline-block align-top"}),"Transactions"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/profile",children:[Object(N.jsx)("img",{alt:"Profile",src:y.url.BASE_URL+"/icons/profile-icon.png",width:"26",className:"d-inline-block align-top"}),"Profile"]})})]})})})},He=function(e){return Object(N.jsxs)(Ie.a,{collapseOnSelect:!0,className:"sticky-top shadow-sm",expand:"*",bg:"light",variant:"light",children:[Object(N.jsx)(Ie.a.Brand,{className:"col-sm-3 col-md-2 mr-0 px-3",href:"#home",children:Object(N.jsx)("img",{alt:"",src:y.url.BASE_URL+"/icons/logo.png",height:"30",className:"d-inline-block align-top"})}),Object(N.jsx)("button",{className:"navbar-toggler position-absolute d-md-none collapsed",type:"button","data-toggle":"collapse","data-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(N.jsx)("span",{className:"navbar-toggler-icon"})}),Object(N.jsxs)("ul",{className:"navbar-nav px-3",children:[Object(N.jsx)("li",{className:"nav-item text-nowrap notification-section",children:Object(N.jsx)(Ue,{})}),Object(N.jsx)("li",{className:"nav-item text-nowrap ml-3",children:Object(N.jsx)(L.b,{className:"nav-link logout-btn",onClick:function(t){return e.onLogout()},children:"Logout"})})]})]})},Ye=function(e){return Object(N.jsx)(Ie.a.Collapse,{id:"sidebarMenu",className:"col-md-4 col-lg-3 d-md-block bg-light sidebar collapse shadow",children:Object(N.jsx)("div",{className:"sidebar-sticky pt-3",children:Object(N.jsxs)("ul",{className:"nav flex-column",children:[Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/",children:[Object(N.jsx)("img",{alt:"Dashboard",src:y.url.BASE_URL+"/icons/dashboard-icon.png",width:"26",className:"d-inline-block align-top"}),"Dashboard ",Object(N.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/rewards",children:[Object(N.jsx)("img",{alt:"Rewards",src:y.url.BASE_URL+"/icons/reward-icon.png",width:"26",className:"d-inline-block align-top"}),"Rewards"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/campaigns",children:[Object(N.jsx)("img",{alt:"Campaigns",src:y.url.BASE_URL+"/icons/campaign-icon.png",width:"26",className:"d-inline-block align-top"}),"Campaigns"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/transactions",children:[Object(N.jsx)("img",{alt:"Transactions",src:y.url.BASE_URL+"/icons/transaction-icon.png",width:"26",className:"d-inline-block align-top"}),"Transactions"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/profile",children:[Object(N.jsx)("img",{alt:"Profile",src:y.url.BASE_URL+"/icons/profile-icon.png",width:"26",className:"d-inline-block align-top"}),"Profile"]})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsxs)(L.b,{className:"nav-link",to:"/settings",children:[Object(N.jsx)("img",{alt:"Dashboard",src:y.url.BASE_URL+"/icons/settings-icon.png",width:"26",className:"d-inline-block align-top"}),"Settings"]})})]})})})};a(291);q.a.tz.setDefault(q.a.tz.guess(!0));var qe=function(e){var t=e.component,a=Object(Se.a)(e,["component"]),n=Object(b.b)(),c=Object(b.c)((function(e){return e.Auth}));if(!R.a.isEmpty(c.user)){v.a.defaults.headers.Authorization="Bearer "+c.user.token;window.Echo=new Ae.a({broadcaster:"pusher",key:"658ad8bb2f982c7fa645",cluster:"ap1",wsHost:y.url.BROADCAST_URL,wsPort:6001,forceTLS:!0,authorizer:function(e,t){return{authorize:function(t,a){v.a.post("/broadcasting/auth",{socket_id:t,channel_name:e.name}).then((function(e){v.a.defaults.headers["X-Socket-ID"]=t,a(!1,e.data)})).catch((function(e){a(!0,e)}))}}},auth:{headers:{Authorization:"Bearer ".concat(c.user.token),Accept:"application/json"}}}),window.Echo.private("notification").listen("UserRegistered",(function(e){console.log("channel",e)}))}return Object(N.jsx)(i.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){if(R.a.isEmpty(c.user))return Object(N.jsx)(i.a,{to:{pathname:"/login",state:{from:e.location}}});var r=function(t){n(function(){var e=Object(j.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"USER_REQUEST"}),e.next=4,v.a.post("/logout");case 4:a=e.sent,window.Echo.disconnect(),t({type:"LOGOUT_SUCCESS",payload:a.data.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"USER_FAIL",payload:e.t0.response.data.data});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),e.history.push("/login")};return-1==R.a.indexOf(a.allowed,c.user.type)?Object(N.jsx)(N.Fragment,{children:"Not Allowed"}):1==c.user.type?Object(N.jsxs)("div",{className:"superadmin-page",children:[Object(N.jsx)(Be,{onLogout:r}),Object(N.jsx)(Te.a,{fluid:!0,children:Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)(Ge,{}),Object(N.jsx)("main",{role:"main",className:"col-md-8 col-lg-9 ml-sm-auto px-md-4",children:Object(N.jsx)(t,Object(d.a)({},e))})]})})]}):2==c.user.type?Object(N.jsxs)("div",{className:"admin-page",children:[Object(N.jsx)(Fe,{onLogout:r}),Object(N.jsx)(Te.a,{fluid:!0,children:Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)(ze,{}),Object(N.jsx)("main",{role:"main",className:"col-md-8 col-lg-9 ml-sm-auto px-md-4",children:Object(N.jsx)(t,Object(d.a)({},e))})]})})]}):Object(N.jsxs)("div",{className:"customer-page",children:[Object(N.jsx)(He,{onLogout:r}),Object(N.jsx)(Te.a,{fluid:!0,children:Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)(Ye,{userid:c.user.id}),Object(N.jsx)("main",{role:"main",className:"col-md-8 col-lg-9 ml-sm-auto px-md-4",children:Object(N.jsx)(t,Object(d.a)({},e))})]})})]})}}))},Qe=function(e){var t=e.component,a=Object(Se.a)(e,["component"]),n=Object(b.c)((function(e){return e.Auth}));return Object(N.jsx)(i.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){return R.a.isEmpty(n.user)?Object(N.jsxs)("div",{className:"login-page",children:[Object(N.jsx)("span",{className:"top-shape"}),Object(N.jsx)("span",{className:"bottom-shape"}),Object(N.jsx)(t,Object(d.a)({},e))]}):Object(N.jsx)(i.a,{to:{pathname:"/",state:{from:e.location}}})}}))};var Ve=function(){return Object(N.jsxs)(i.d,{children:[Object(N.jsx)(Qe,{path:"/login",exact:!0,component:I}),Object(N.jsx)(qe,{path:"/users",exact:!0,component:Q,allowed:[1,2]}),Object(N.jsx)(qe,{path:"/user/:user",exact:!0,component:X,allowed:[1,2]}),Object(N.jsx)(qe,{path:"/profile",exact:!0,component:$,allowed:[2,3]}),Object(N.jsx)(qe,{path:"/settings",exact:!0,component:ee,allowed:[1,2,3]}),Object(N.jsx)(qe,{path:"/packages",exact:!0,component:ae,allowed:[1,2]}),Object(N.jsx)(qe,{path:"/actions",exact:!0,component:se,allowed:[1,2]}),Object(N.jsx)(qe,{path:"/rewards",exact:!0,component:ge,allowed:[1,2,3]}),Object(N.jsx)(qe,{path:"/transactions",exact:!0,component:Ce,allowed:[1,2,3]}),Object(N.jsx)(qe,{path:"/campaigns",exact:!0,component:Oe,allowed:[1,2,3]}),Object(N.jsx)(qe,{path:"/campaign/:campaign",exact:!0,component:pe}),Object(N.jsx)(qe,{path:"/",exact:!0,component:_,allowed:[1,2,3]}),Object(N.jsx)(i.b,{path:"*",component:function(){return"404 NOT FOUND"}})]})},Ke=(a(292),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,315)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))}),We=a(41),Je=a(150),Ze=a(151),Xe={loading:!1,data:[],count:0,errorMsg:""},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST_LOADING":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case"PRODUCT_LIST_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:t.payload,errorMsg:""});case"PRODUCT_LIST_FAIL":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,errorMsg:"Unable to get products"});default:return e}},et={loading:!1,data:{},errorMsg:""},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACTION_REQUEST":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case"ACTION_FETCH":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:t.payload,errorMsg:""});case"ACTION_ADD":var a=e.data,n=[].concat(Object(D.a)(e.data.data),[t.payload]);return a.data=n,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:a,errorMsg:""});case"ACTION_UPDATE":a=e.data;var c=e.data.data.findIndex((function(e){return e.id===t.payload.id}));n=Object(d.a)(Object(d.a)({},e.data.data[c]),t.payload);return a.data[c]=n,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:a,errorMsg:""});case"ACTION_DELETE":n=e.data;var r=e.data.data.filter((function(e){return e.id!==t.payload.id}));return n.data=r,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:n,errorMsg:""});case"ACTION_FAIL":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,errorMsg:t.payload.error});default:return e}},at={loading:!1,user:"undefined"!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},errorMsg:""},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case"LOGIN_SUCCESS":return localStorage.setItem("user",JSON.stringify(t.payload)),Object(d.a)(Object(d.a)({},e),{},{loading:!1,user:t.payload,errorMsg:""});case"LOGIN_FAIL":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,errorMsg:t.payload.error});case"LOGOUT_REQUEST":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case"LOGOUT_SUCCESS":return localStorage.removeItem("user"),Object(d.a)(Object(d.a)({},e),{},{loading:!1,user:{},errorMsg:""});case"LOGOUT_FAIL":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,errorMsg:t.payload.error});default:return e}},ct={loading:!1,data:{},errorMsg:""},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAMPAIGN_REQUEST":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case"CAMPAIGN_FETCH":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:t.payload,errorMsg:""});case"CAMPAIGN_ADD":var a=[].concat(Object(D.a)(e.data.data),[t.payload]);return(n=e.data).data=a,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:n,errorMsg:""});case"CAMPAIGN_UPDATE":var n=e.data,c=e.data.data.findIndex((function(e){return e.id===t.payload.id}));a=Object(d.a)(Object(d.a)({},e.data.data[c]),t.payload);return n.data[c]=a,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:n,errorMsg:""});case"CAMPAIGN_DELETE":n=e.data,a=e.data.data.filter((function(e){return e.id!==t.payload.id}));return n.data=a,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:n,errorMsg:""});case"CAMPAIGN_FAIL":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,errorMsg:t.payload.error});default:return e}},st={loading:!1,data:{},errorMsg:""},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PACKAGE_REQUEST":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case"PACKAGE_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:t.payload,errorMsg:""});case"PACKAGE_ADDED":var a=e.data,n=[].concat(Object(D.a)(e.data.data),[t.payload]);return a.data=n,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:a,errorMsg:""});case"PACKAGE_UPDATED":a=e.data;var c=e.data.data.findIndex((function(e){return e.id===t.payload.id}));n=Object(d.a)(Object(d.a)({},e.data.data[c]),t.payload);return a.data[c]=n,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:a,errorMsg:""});case"PACKAGE_DELETED":a=e.data,n=e.data.data.filter((function(e){return e.id!==t.payload.id}));return a.data=n,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:a,errorMsg:""});case"PACKAGE_FAIL":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,errorMsg:t.payload.error});default:return e}},lt={loading:!1,data:{},errorMsg:""},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REWARD_REQUEST":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case"REWARD_FETCH":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:t.payload,errorMsg:""});case"REWARD_ADD":var a=e.data,n=[].concat(Object(D.a)(e.data.data),[t.payload]);return a.data=n,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:a,errorMsg:""});case"REWARD_UPDATE":a=e.data;var c=e.data.data.findIndex((function(e){return e.id===t.payload.id}));n=Object(d.a)(Object(d.a)({},e.data.data[c]),t.payload);return a.data[c]=n,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:a,errorMsg:""});case"REWARD_DELETE":a=e.data,n=e.data.data.filter((function(e){return e.id!==t.payload.id}));return a.data=n,Object(d.a)(Object(d.a)({},e),{},{loading:!1,data:a,errorMsg:""});case"REWARD_FAIL":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,errorMsg:t.payload.error});default:return e}},dt={loading:!1,data:{},errorMsg:""},jt=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,a=arguments.length>1?arguments[1]:void 0,n=t.data;switch(a.type){case"REQUEST":return Object(d.a)(Object(d.a)({},t),{},{loading:!0});case"FETCH_SUCCESS":return Object(d.a)(Object(d.a)({},t),{},{loading:!1,data:a.payload,errorMsg:""});case"ADD_SUCCESS":return e=Object(D.a)(t.data.data),n.data=e,Object(d.a)(Object(d.a)({},t),{},{loading:!1,data:n,errorMsg:""});case"UPDATE_SUCCESS":var c=t.data.data.findIndex((function(e){return e.id===a.payload.id}));return e=Object(d.a)(Object(d.a)({},t.data.data[c]),a.payload),n.data[c]=e,console.log("update success 2"),Object(d.a)(Object(d.a)({},t),{},{loading:!1,data:n,errorMsg:""});case"DELETE_SUCCESS":return e=t.data.data.filter((function(e){return e.id!==a.payload.id})),n.data=e,Object(d.a)(Object(d.a)({},t),{},{loading:!1,data:n,errorMsg:""});case"FAIL":return Object(d.a)(Object(d.a)({},t),{},{loading:!1,errorMsg:a.payload});default:return t}},ut={loading:!1,data:{},errorMsg:""},bt=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,a=arguments.length>1?arguments[1]:void 0,n=t.data;switch(a.type){case"USER_REQUEST":return Object(d.a)(Object(d.a)({},t),{},{loading:!0});case"USER_FETCH":return Object(d.a)(Object(d.a)({},t),{},{loading:!1,data:a.payload,errorMsg:""});case"USER_ADD":return e=[a.payload].concat(Object(D.a)(t.data.data)),n.data=e,Object(d.a)(Object(d.a)({},t),{},{loading:!1,data:n,errorMsg:""});case"USER_UPDATE":var c=t.data.data.findIndex((function(e){return e.id===a.payload.id}));return e=Object(d.a)(Object(d.a)({},t.data.data[c]),a.payload),n.data[c]=e,Object(d.a)(Object(d.a)({},t),{},{loading:!1,data:n,errorMsg:""});case"USER_DELETE":return e=t.data.data.filter((function(e){return e.id!==a.payload.id})),n.data=e,Object(d.a)(Object(d.a)({},t),{},{loading:!1,data:n,errorMsg:""});case"USER_FAIL":return Object(d.a)(Object(d.a)({},t),{},{loading:!1,errorMsg:a.payload.error});default:return t}},ht=Object(We.combineReducers)({Action:tt,Auth:nt,Campaign:rt,Package:it,ProductList:$e,Reward:ot,Transaction:jt,User:bt}),Ot=Object(We.createStore)(ht,Object(Je.composeWithDevTools)(Object(We.applyMiddleware)((function(e){return function(e){return function(t){return e(t)}}}),Ze.a)));v.a.defaults.baseURL=y.url.API_URL,v.a.defaults.headers={"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-Type":"application/json"},s.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(L.a,{children:Object(N.jsx)(b.a,{store:Ot,children:Object(N.jsx)(Ve,{})})})}),document.getElementById("root")),Ke()}},[[293,1,2]]]);
//# sourceMappingURL=main.96c61a24.chunk.js.map